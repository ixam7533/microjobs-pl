"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/auth/favorites";
exports.ids = ["pages/api/auth/favorites"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "cookie":
/*!*************************!*\
  !*** external "cookie" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("cookie");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Ffavorites&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fauth%2Ffavorites%2Findex.ts&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Ffavorites&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fauth%2Ffavorites%2Findex.ts&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_auth_favorites_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/auth/favorites/index.ts */ \"(api)/./pages/api/auth/favorites/index.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_favorites_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_favorites_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/auth/favorites\",\n        pathname: \"/api/auth/favorites\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_auth_favorites_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmF1dGglMkZmYXZvcml0ZXMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmF1dGglMkZmYXZvcml0ZXMlMkZpbmRleC50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNnRTtBQUNoRTtBQUNBLGlFQUFlLHdFQUFLLENBQUMsK0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLCtEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovLy8/ZmU5YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL2F1dGgvZmF2b3JpdGVzL2luZGV4LnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXV0aC9mYXZvcml0ZXNcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hdXRoL2Zhdm9yaXRlc1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Ffavorites&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fauth%2Ffavorites%2Findex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getUserFromRequest: () => (/* binding */ getUserFromRequest)\n/* harmony export */ });\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cookie */ \"cookie\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cookie__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _jwt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./jwt */ \"(api)/./lib/jwt.ts\");\n// lib/auth.ts\n\n // your existing JWT helper\nfunction getUserFromRequest(req) {\n    const cookies = (0,cookie__WEBPACK_IMPORTED_MODULE_0__.parse)(req.headers.cookie || \"\");\n    if (!cookies.token) return null;\n    try {\n        return (0,_jwt__WEBPACK_IMPORTED_MODULE_1__.verifyToken)(cookies.token);\n    } catch  {\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsY0FBYztBQUVnQjtBQUNLLENBQUcsMkJBQTJCO0FBRTFELFNBQVNFLG1CQUFtQkMsR0FBbUI7SUFDcEQsTUFBTUMsVUFBVUosNkNBQUtBLENBQUNHLElBQUlFLE9BQU8sQ0FBQ0MsTUFBTSxJQUFJO0lBQzVDLElBQUksQ0FBQ0YsUUFBUUcsS0FBSyxFQUFFLE9BQU87SUFFM0IsSUFBSTtRQUNGLE9BQU9OLGlEQUFXQSxDQUFDRyxRQUFRRyxLQUFLO0lBQ2xDLEVBQUUsT0FBTTtRQUNOLE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL2F1dGgudHM/YmY3ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBsaWIvYXV0aC50c1xuaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCB9IGZyb20gJ25leHQnXG5pbXBvcnQgeyBwYXJzZSB9IGZyb20gJ2Nvb2tpZSdcbmltcG9ydCB7IHZlcmlmeVRva2VuIH0gZnJvbSAnLi9qd3QnICAgLy8geW91ciBleGlzdGluZyBKV1QgaGVscGVyXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRVc2VyRnJvbVJlcXVlc3QocmVxOiBOZXh0QXBpUmVxdWVzdCkge1xuICBjb25zdCBjb29raWVzID0gcGFyc2UocmVxLmhlYWRlcnMuY29va2llIHx8ICcnKVxuICBpZiAoIWNvb2tpZXMudG9rZW4pIHJldHVybiBudWxsXG5cbiAgdHJ5IHtcbiAgICByZXR1cm4gdmVyaWZ5VG9rZW4oY29va2llcy50b2tlbikgYXMgeyBpZDogbnVtYmVyOyBlbWFpbDogc3RyaW5nIH1cbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuIl0sIm5hbWVzIjpbInBhcnNlIiwidmVyaWZ5VG9rZW4iLCJnZXRVc2VyRnJvbVJlcXVlc3QiLCJyZXEiLCJjb29raWVzIiwiaGVhZGVycyIsImNvb2tpZSIsInRva2VuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/auth.ts\n");

/***/ }),

/***/ "(api)/./lib/jwt.ts":
/*!********************!*\
  !*** ./lib/jwt.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signToken: () => (/* binding */ signToken),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n\nconst JWT_SECRET = process.env.JWT_SECRET;\nif (!JWT_SECRET) throw new Error(\"JWT_SECRET is missing in environment variables\");\nfunction signToken(payload, expiresIn = \"7d\") {\n    const options = {\n        expiresIn: String(expiresIn)\n    };\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign(payload, JWT_SECRET, options);\n}\nfunction verifyToken(token) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, JWT_SECRET);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvand0LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBOEI7QUFFOUIsTUFBTUMsYUFBYUMsUUFBUUMsR0FBRyxDQUFDRixVQUFVO0FBQ3pDLElBQUksQ0FBQ0EsWUFBWSxNQUFNLElBQUlHLE1BQU07QUFFMUIsU0FBU0MsVUFBVUMsT0FBNEIsRUFBRUMsWUFBNkIsSUFBSTtJQUN2RixNQUFNQyxVQUFlO1FBQUVELFdBQVdFLE9BQU9GO0lBQVc7SUFDcEQsT0FBT1Asd0RBQVEsQ0FBQ00sU0FBU0wsWUFBc0JPO0FBQ2pEO0FBRU8sU0FBU0csWUFBWUMsS0FBYTtJQUN2QyxPQUFPWiwwREFBVSxDQUFDWSxPQUFPWDtBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9qd3QudHM/ZWEyMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbidcblxuY29uc3QgSldUX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVRcbmlmICghSldUX1NFQ1JFVCkgdGhyb3cgbmV3IEVycm9yKCdKV1RfU0VDUkVUIGlzIG1pc3NpbmcgaW4gZW52aXJvbm1lbnQgdmFyaWFibGVzJylcblxuZXhwb3J0IGZ1bmN0aW9uIHNpZ25Ub2tlbihwYXlsb2FkOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBleHBpcmVzSW46IHN0cmluZyB8IG51bWJlciA9ICc3ZCcpIHtcbiAgY29uc3Qgb3B0aW9uczogYW55ID0geyBleHBpcmVzSW46IFN0cmluZyhleHBpcmVzSW4pIH1cbiAgcmV0dXJuIGp3dC5zaWduKHBheWxvYWQsIEpXVF9TRUNSRVQgYXMgc3RyaW5nLCBvcHRpb25zKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdmVyaWZ5VG9rZW4odG9rZW46IHN0cmluZykge1xuICByZXR1cm4gand0LnZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVCBhcyBzdHJpbmcpXG59Il0sIm5hbWVzIjpbImp3dCIsIkpXVF9TRUNSRVQiLCJwcm9jZXNzIiwiZW52IiwiRXJyb3IiLCJzaWduVG9rZW4iLCJwYXlsb2FkIiwiZXhwaXJlc0luIiwib3B0aW9ucyIsIlN0cmluZyIsInNpZ24iLCJ2ZXJpZnlUb2tlbiIsInRva2VuIiwidmVyaWZ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/jwt.ts\n");

/***/ }),

/***/ "(api)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQUU3QyxNQUFNQyxTQUFTLElBQUlELHdEQUFZQTtBQUMvQixpRUFBZUMsTUFBTUEsRUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9wcmlzbWEudHM/OTgyMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcblxuY29uc3QgcHJpc21hID0gbmV3IFByaXNtYUNsaWVudCgpXG5leHBvcnQgZGVmYXVsdCBwcmlzbWFcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJwcmlzbWEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/prisma.ts\n");

/***/ }),

/***/ "(api)/./pages/api/auth/favorites/index.ts":
/*!*******************************************!*\
  !*** ./pages/api/auth/favorites/index.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../lib/prisma */ \"(api)/./lib/prisma.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../lib/auth */ \"(api)/./lib/auth.ts\");\n\n\nasync function handler(req, res) {\n    const user = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.getUserFromRequest)(req);\n    if (!user) return res.status(401).json({\n        error: \"Zaloguj się\"\n    });\n    if (req.method === \"GET\") {\n        try {\n            const favorites = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].favorite.findMany({\n                where: {\n                    userId: user.id\n                },\n                include: {\n                    offer: {\n                        include: {\n                            images: true,\n                            owner: true\n                        }\n                    }\n                },\n                orderBy: {\n                    createdAt: \"desc\"\n                }\n            });\n            res.json(favorites.map((fav)=>({\n                    id: fav.offer.id,\n                    title: fav.offer.title,\n                    category: fav.offer.category,\n                    description: fav.offer.description,\n                    location: fav.offer.location,\n                    contactName: fav.offer.contactName,\n                    contactEmail: fav.offer.contactEmail,\n                    contactPhone: fav.offer.contactPhone,\n                    ownerEmail: fav.offer.owner.email,\n                    createdAt: fav.offer.createdAt,\n                    image: fav.offer.images[0]?.url || \"/house4k.jpg\",\n                    images: fav.offer.images.map((img)=>img.url),\n                    price: fav.offer.price || 0,\n                    favoriteId: fav.id\n                })));\n        } catch (error) {\n            console.error(\"Błąd pobierania ulubionych:\", error);\n            res.status(500).json({\n                error: \"Błąd serwera\"\n            });\n        }\n    }\n    if (req.method === \"POST\") {\n        try {\n            const { offerId } = req.body;\n            if (!offerId) {\n                return res.status(400).json({\n                    error: \"Brak ID ogłoszenia\"\n                });\n            }\n            // Sprawdź czy już nie jest w ulubionych\n            const existing = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].favorite.findUnique({\n                where: {\n                    userId_offerId: {\n                        userId: user.id,\n                        offerId: parseInt(offerId)\n                    }\n                }\n            });\n            if (existing) {\n                return res.status(400).json({\n                    error: \"Już w ulubionych\"\n                });\n            }\n            const favorite = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].favorite.create({\n                data: {\n                    userId: user.id,\n                    offerId: parseInt(offerId)\n                }\n            });\n            res.status(201).json({\n                success: true,\n                favorite\n            });\n        } catch (error) {\n            console.error(\"Błąd dodawania do ulubionych:\", error);\n            res.status(500).json({\n                error: \"Błąd serwera\"\n            });\n        }\n    }\n    if (req.method === \"DELETE\") {\n        try {\n            const { offerId } = req.body;\n            if (!offerId) {\n                return res.status(400).json({\n                    error: \"Brak ID ogłoszenia\"\n                });\n            }\n            await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].favorite.delete({\n                where: {\n                    userId_offerId: {\n                        userId: user.id,\n                        offerId: parseInt(offerId)\n                    }\n                }\n            });\n            res.json({\n                success: true\n            });\n        } catch (error) {\n            console.error(\"Błąd usuwania z ulubionych:\", error);\n            res.status(500).json({\n                error: \"Błąd serwera\"\n            });\n        }\n    }\n    res.status(405).json({\n        error: \"Metoda nie dozwolona\"\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYXV0aC9mYXZvcml0ZXMvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQzJDO0FBQ2M7QUFFMUMsZUFBZUUsUUFBUUMsR0FBbUIsRUFBRUMsR0FBb0I7SUFDN0UsTUFBTUMsT0FBT0osNkRBQWtCQSxDQUFDRTtJQUNoQyxJQUFJLENBQUNFLE1BQU0sT0FBT0QsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztRQUFFQyxPQUFPO0lBQWM7SUFFOUQsSUFBSUwsSUFBSU0sTUFBTSxLQUFLLE9BQU87UUFDeEIsSUFBSTtZQUNGLE1BQU1DLFlBQVksTUFBTVYsNERBQWUsQ0FBQ1ksUUFBUSxDQUFDO2dCQUMvQ0MsT0FBTztvQkFBRUMsUUFBUVQsS0FBS1UsRUFBRTtnQkFBQztnQkFDekJDLFNBQVM7b0JBQ1BDLE9BQU87d0JBQ0xELFNBQVM7NEJBQ1BFLFFBQVE7NEJBQ1JDLE9BQU87d0JBQ1Q7b0JBQ0Y7Z0JBQ0Y7Z0JBQ0FDLFNBQVM7b0JBQUVDLFdBQVc7Z0JBQU87WUFDL0I7WUFFQWpCLElBQUlHLElBQUksQ0FBQ0csVUFBVVksR0FBRyxDQUFDQyxDQUFBQSxNQUFRO29CQUM3QlIsSUFBSVEsSUFBSU4sS0FBSyxDQUFDRixFQUFFO29CQUNoQlMsT0FBT0QsSUFBSU4sS0FBSyxDQUFDTyxLQUFLO29CQUN0QkMsVUFBVUYsSUFBSU4sS0FBSyxDQUFDUSxRQUFRO29CQUM1QkMsYUFBYUgsSUFBSU4sS0FBSyxDQUFDUyxXQUFXO29CQUNsQ0MsVUFBVUosSUFBSU4sS0FBSyxDQUFDVSxRQUFRO29CQUM1QkMsYUFBYUwsSUFBSU4sS0FBSyxDQUFDVyxXQUFXO29CQUNsQ0MsY0FBY04sSUFBSU4sS0FBSyxDQUFDWSxZQUFZO29CQUNwQ0MsY0FBY1AsSUFBSU4sS0FBSyxDQUFDYSxZQUFZO29CQUNwQ0MsWUFBWVIsSUFBSU4sS0FBSyxDQUFDRSxLQUFLLENBQUNhLEtBQUs7b0JBQ2pDWCxXQUFXRSxJQUFJTixLQUFLLENBQUNJLFNBQVM7b0JBQzlCWSxPQUFPVixJQUFJTixLQUFLLENBQUNDLE1BQU0sQ0FBQyxFQUFFLEVBQUVnQixPQUFPO29CQUNuQ2hCLFFBQVFLLElBQUlOLEtBQUssQ0FBQ0MsTUFBTSxDQUFDSSxHQUFHLENBQUNhLENBQUFBLE1BQU9BLElBQUlELEdBQUc7b0JBQzNDRSxPQUFPYixJQUFJTixLQUFLLENBQUNtQixLQUFLLElBQUk7b0JBQzFCQyxZQUFZZCxJQUFJUixFQUFFO2dCQUNwQjtRQUNGLEVBQUUsT0FBT1AsT0FBTztZQUNkOEIsUUFBUTlCLEtBQUssQ0FBQywrQkFBK0JBO1lBQzdDSixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQWU7UUFDL0M7SUFDRjtJQUVBLElBQUlMLElBQUlNLE1BQU0sS0FBSyxRQUFRO1FBQ3pCLElBQUk7WUFDRixNQUFNLEVBQUU4QixPQUFPLEVBQUUsR0FBR3BDLElBQUlxQyxJQUFJO1lBRTVCLElBQUksQ0FBQ0QsU0FBUztnQkFDWixPQUFPbkMsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRUMsT0FBTztnQkFBcUI7WUFDNUQ7WUFFQSx3Q0FBd0M7WUFDeEMsTUFBTWlDLFdBQVcsTUFBTXpDLDREQUFlLENBQUMwQyxVQUFVLENBQUM7Z0JBQ2hEN0IsT0FBTztvQkFDTDhCLGdCQUFnQjt3QkFDZDdCLFFBQVFULEtBQUtVLEVBQUU7d0JBQ2Z3QixTQUFTSyxTQUFTTDtvQkFDcEI7Z0JBQ0Y7WUFDRjtZQUVBLElBQUlFLFVBQVU7Z0JBQ1osT0FBT3JDLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQUVDLE9BQU87Z0JBQW1CO1lBQzFEO1lBRUEsTUFBTUcsV0FBVyxNQUFNWCw0REFBZSxDQUFDNkMsTUFBTSxDQUFDO2dCQUM1Q0MsTUFBTTtvQkFDSmhDLFFBQVFULEtBQUtVLEVBQUU7b0JBQ2Z3QixTQUFTSyxTQUFTTDtnQkFDcEI7WUFDRjtZQUVBbkMsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRXdDLFNBQVM7Z0JBQU1wQztZQUFTO1FBQ2pELEVBQUUsT0FBT0gsT0FBTztZQUNkOEIsUUFBUTlCLEtBQUssQ0FBQyxpQ0FBaUNBO1lBQy9DSixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQWU7UUFDL0M7SUFDRjtJQUVBLElBQUlMLElBQUlNLE1BQU0sS0FBSyxVQUFVO1FBQzNCLElBQUk7WUFDRixNQUFNLEVBQUU4QixPQUFPLEVBQUUsR0FBR3BDLElBQUlxQyxJQUFJO1lBRTVCLElBQUksQ0FBQ0QsU0FBUztnQkFDWixPQUFPbkMsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRUMsT0FBTztnQkFBcUI7WUFDNUQ7WUFFQSxNQUFNUiw0REFBZSxDQUFDZ0QsTUFBTSxDQUFDO2dCQUMzQm5DLE9BQU87b0JBQ0w4QixnQkFBZ0I7d0JBQ2Q3QixRQUFRVCxLQUFLVSxFQUFFO3dCQUNmd0IsU0FBU0ssU0FBU0w7b0JBQ3BCO2dCQUNGO1lBQ0Y7WUFFQW5DLElBQUlHLElBQUksQ0FBQztnQkFBRXdDLFNBQVM7WUFBSztRQUMzQixFQUFFLE9BQU92QyxPQUFPO1lBQ2Q4QixRQUFROUIsS0FBSyxDQUFDLCtCQUErQkE7WUFDN0NKLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBZTtRQUMvQztJQUNGO0lBRUFKLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7UUFBRUMsT0FBTztJQUF1QjtBQUN2RCIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3BhZ2VzL2FwaS9hdXRoL2Zhdm9yaXRlcy9pbmRleC50cz9mYzBmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnXG5pbXBvcnQgcHJpc21hIGZyb20gJy4uLy4uLy4uLy4uL2xpYi9wcmlzbWEnXG5pbXBvcnQgeyBnZXRVc2VyRnJvbVJlcXVlc3QgfSBmcm9tICcuLi8uLi8uLi8uLi9saWIvYXV0aCdcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICBjb25zdCB1c2VyID0gZ2V0VXNlckZyb21SZXF1ZXN0KHJlcSlcbiAgaWYgKCF1c2VyKSByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ1phbG9ndWogc2nEmScgfSlcblxuICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZmF2b3JpdGVzID0gYXdhaXQgcHJpc21hLmZhdm9yaXRlLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHsgdXNlcklkOiB1c2VyLmlkIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBvZmZlcjoge1xuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICBpbWFnZXM6IHRydWUsXG4gICAgICAgICAgICAgIG93bmVyOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH1cbiAgICAgIH0pXG5cbiAgICAgIHJlcy5qc29uKGZhdm9yaXRlcy5tYXAoZmF2ID0+ICh7XG4gICAgICAgIGlkOiBmYXYub2ZmZXIuaWQsXG4gICAgICAgIHRpdGxlOiBmYXYub2ZmZXIudGl0bGUsXG4gICAgICAgIGNhdGVnb3J5OiBmYXYub2ZmZXIuY2F0ZWdvcnksXG4gICAgICAgIGRlc2NyaXB0aW9uOiBmYXYub2ZmZXIuZGVzY3JpcHRpb24sXG4gICAgICAgIGxvY2F0aW9uOiBmYXYub2ZmZXIubG9jYXRpb24sXG4gICAgICAgIGNvbnRhY3ROYW1lOiBmYXYub2ZmZXIuY29udGFjdE5hbWUsXG4gICAgICAgIGNvbnRhY3RFbWFpbDogZmF2Lm9mZmVyLmNvbnRhY3RFbWFpbCxcbiAgICAgICAgY29udGFjdFBob25lOiBmYXYub2ZmZXIuY29udGFjdFBob25lLFxuICAgICAgICBvd25lckVtYWlsOiBmYXYub2ZmZXIub3duZXIuZW1haWwsXG4gICAgICAgIGNyZWF0ZWRBdDogZmF2Lm9mZmVyLmNyZWF0ZWRBdCxcbiAgICAgICAgaW1hZ2U6IGZhdi5vZmZlci5pbWFnZXNbMF0/LnVybCB8fCAnL2hvdXNlNGsuanBnJyxcbiAgICAgICAgaW1hZ2VzOiBmYXYub2ZmZXIuaW1hZ2VzLm1hcChpbWcgPT4gaW1nLnVybCksXG4gICAgICAgIHByaWNlOiBmYXYub2ZmZXIucHJpY2UgfHwgMCxcbiAgICAgICAgZmF2b3JpdGVJZDogZmF2LmlkXG4gICAgICB9KSkpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0LFgsSFZCBwb2JpZXJhbmlhIHVsdWJpb255Y2g6JywgZXJyb3IpXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnQsWCxIVkIHNlcndlcmEnIH0pXG4gICAgfVxuICB9XG5cbiAgaWYgKHJlcS5tZXRob2QgPT09ICdQT1NUJykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IG9mZmVySWQgfSA9IHJlcS5ib2R5XG4gICAgICBcbiAgICAgIGlmICghb2ZmZXJJZCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0JyYWsgSUQgb2fFgm9zemVuaWEnIH0pXG4gICAgICB9XG5cbiAgICAgIC8vIFNwcmF3ZMW6IGN6eSBqdcW8IG5pZSBqZXN0IHcgdWx1YmlvbnljaFxuICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwcmlzbWEuZmF2b3JpdGUuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgdXNlcklkX29mZmVySWQ6IHtcbiAgICAgICAgICAgIHVzZXJJZDogdXNlci5pZCxcbiAgICAgICAgICAgIG9mZmVySWQ6IHBhcnNlSW50KG9mZmVySWQpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdKdcW8IHcgdWx1YmlvbnljaCcgfSlcbiAgICAgIH1cblxuICAgICAgY29uc3QgZmF2b3JpdGUgPSBhd2FpdCBwcmlzbWEuZmF2b3JpdGUuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHVzZXJJZDogdXNlci5pZCxcbiAgICAgICAgICBvZmZlcklkOiBwYXJzZUludChvZmZlcklkKVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGZhdm9yaXRlIH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0LFgsSFZCBkb2Rhd2FuaWEgZG8gdWx1YmlvbnljaDonLCBlcnJvcilcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdCxYLEhWQgc2Vyd2VyYScgfSlcbiAgICB9XG4gIH1cblxuICBpZiAocmVxLm1ldGhvZCA9PT0gJ0RFTEVURScpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBvZmZlcklkIH0gPSByZXEuYm9keVxuICAgICAgXG4gICAgICBpZiAoIW9mZmVySWQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdCcmFrIElEIG9nxYJvc3plbmlhJyB9KVxuICAgICAgfVxuXG4gICAgICBhd2FpdCBwcmlzbWEuZmF2b3JpdGUuZGVsZXRlKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICB1c2VySWRfb2ZmZXJJZDoge1xuICAgICAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgICAgICAgb2ZmZXJJZDogcGFyc2VJbnQob2ZmZXJJZClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIHJlcy5qc29uKHsgc3VjY2VzczogdHJ1ZSB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdCxYLEhWQgdXN1d2FuaWEgeiB1bHViaW9ueWNoOicsIGVycm9yKVxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0LFgsSFZCBzZXJ3ZXJhJyB9KVxuICAgIH1cbiAgfVxuXG4gIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRvZGEgbmllIGRvendvbG9uYScgfSlcbn1cbiJdLCJuYW1lcyI6WyJwcmlzbWEiLCJnZXRVc2VyRnJvbVJlcXVlc3QiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwidXNlciIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsIm1ldGhvZCIsImZhdm9yaXRlcyIsImZhdm9yaXRlIiwiZmluZE1hbnkiLCJ3aGVyZSIsInVzZXJJZCIsImlkIiwiaW5jbHVkZSIsIm9mZmVyIiwiaW1hZ2VzIiwib3duZXIiLCJvcmRlckJ5IiwiY3JlYXRlZEF0IiwibWFwIiwiZmF2IiwidGl0bGUiLCJjYXRlZ29yeSIsImRlc2NyaXB0aW9uIiwibG9jYXRpb24iLCJjb250YWN0TmFtZSIsImNvbnRhY3RFbWFpbCIsImNvbnRhY3RQaG9uZSIsIm93bmVyRW1haWwiLCJlbWFpbCIsImltYWdlIiwidXJsIiwiaW1nIiwicHJpY2UiLCJmYXZvcml0ZUlkIiwiY29uc29sZSIsIm9mZmVySWQiLCJib2R5IiwiZXhpc3RpbmciLCJmaW5kVW5pcXVlIiwidXNlcklkX29mZmVySWQiLCJwYXJzZUludCIsImNyZWF0ZSIsImRhdGEiLCJzdWNjZXNzIiwiZGVsZXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/auth/favorites/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Ffavorites&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fauth%2Ffavorites%2Findex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();