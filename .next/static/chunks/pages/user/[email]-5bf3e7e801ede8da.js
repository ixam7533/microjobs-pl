(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[937],{8418:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/[email]",function(){return r(4940)}])},2463:function(e,a,r){"use strict";r.d(a,{Z:function(){return Footer}});var s=r(5893),t=r(862),i=r.n(t);function Footer(){return(0,s.jsx)("footer",{className:i().footer,children:"\xa9 2025 MicroJobs. Wszelkie prawa zastrzeżone."})}},4940:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return UserProfile}});var s=r(5893),t=r(1163),i=r(7294),n=r(4858),o=r.n(n),l=r(1372),c=r(2463);function UserProfile(){let e=(0,t.useRouter)(),{email:a}=e.query,[r,n]=(0,i.useState)(null),[f,_]=(0,i.useState)([]),[d,m]=(0,i.useState)([]),[u,h]=(0,i.useState)(!0),[g,x]=(0,i.useState)("offers"),[N,p]=(0,i.useState)("");(0,i.useEffect)(()=>{a&&fetchUserData()},[a]);let fetchUserData=async()=>{try{h(!0);let e=await fetch("/api/user/stats?email=".concat(a));if(e.ok){let r=await e.json();n(r),p(r.userName||a)}let r=await fetch("/api/user/offers?email=".concat(a));if(r.ok){let e=await r.json();_(e)}let s=await fetch("/api/user/ratings?email=".concat(a));if(s.ok){let e=await s.json();m(e)}}catch(e){console.error("Error fetching user data:",e)}finally{h(!1)}},formatDate=e=>new Date(e).toLocaleDateString("pl-PL",{day:"numeric",month:"long",year:"numeric"}),renderStars=e=>{let a=[];for(let r=1;r<=5;r++)a.push((0,s.jsx)("span",{className:r<=e?o().starFilled:o().starEmpty,children:"⭐"},r));return a};return u?(0,s.jsxs)("div",{className:o().container,children:[(0,s.jsx)(l.Z,{}),(0,s.jsxs)("div",{className:o().loading,children:[(0,s.jsx)("div",{className:o().spinner}),(0,s.jsx)("p",{children:"Ładowanie profilu użytkownika..."})]}),(0,s.jsx)(c.Z,{})]}):(0,s.jsxs)("div",{className:o().container,children:[(0,s.jsx)(l.Z,{}),(0,s.jsxs)("div",{className:o().profileContainer,children:[(0,s.jsxs)("div",{className:o().profileHeader,children:[(0,s.jsx)("div",{className:o().userAvatar,children:(0,s.jsx)("span",{className:o().avatarText,children:N.charAt(0).toUpperCase()})}),(0,s.jsxs)("div",{className:o().userInfo,children:[(0,s.jsx)("h1",{className:o().userName,children:N}),(0,s.jsx)("p",{className:o().userEmail,children:a}),(0,s.jsxs)("div",{className:o().userStats,children:[(0,s.jsxs)("div",{className:o().statItem,children:[(0,s.jsx)("span",{className:o().statNumber,children:(null==r?void 0:r.totalOffers)||0}),(0,s.jsx)("span",{className:o().statLabel,children:"Ogłoszeń"})]}),(0,s.jsxs)("div",{className:o().statItem,children:[(0,s.jsx)("span",{className:o().statNumber,children:(null==r?void 0:r.activeOffers)||0}),(0,s.jsx)("span",{className:o().statLabel,children:"Aktywnych"})]}),(0,s.jsxs)("div",{className:o().statItem,children:[(0,s.jsx)("span",{className:o().statNumber,children:(null==r?void 0:r.averageRating)?r.averageRating.toFixed(1):"Brak"}),(0,s.jsx)("span",{className:o().statLabel,children:"Średnia ocena"})]}),(0,s.jsxs)("div",{className:o().statItem,children:[(0,s.jsx)("span",{className:o().statNumber,children:(null==r?void 0:r.totalRatings)||0}),(0,s.jsx)("span",{className:o().statLabel,children:"Ocen"})]})]}),(null==r?void 0:r.memberSince)&&(0,s.jsxs)("p",{className:o().memberSince,children:["Użytkownik od ",formatDate(r.memberSince)]})]})]}),(0,s.jsxs)("div",{className:o().tabNavigation,children:[(0,s.jsxs)("button",{className:"".concat(o().tabButton," ").concat("offers"===g?o().activeTab:""),onClick:()=>x("offers"),children:[(0,s.jsx)("span",{className:o().tabIcon,children:"\uD83D\uDCCB"}),"Ogłoszenia (",f.length,")"]}),(0,s.jsxs)("button",{className:"".concat(o().tabButton," ").concat("ratings"===g?o().activeTab:""),onClick:()=>x("ratings"),children:[(0,s.jsx)("span",{className:o().tabIcon,children:"⭐"}),"Oceny (",d.length,")"]})]}),(0,s.jsxs)("div",{className:o().tabContent,children:["offers"===g&&(0,s.jsx)("div",{className:o().offersGrid,children:f.length>0?f.map(e=>(0,s.jsxs)("div",{className:o().offerCard,onClick:()=>window.open("/offer/".concat(e.id),"_blank"),style:{cursor:"pointer"},children:[(0,s.jsxs)("div",{className:o().offerImage,children:[(0,s.jsx)("img",{src:e.image||"/house4k.jpg",alt:e.title}),(0,s.jsx)("div",{className:o().offerStatus,children:(0,s.jsx)("span",{className:e.isActive?o().activeStatus:o().inactiveStatus,children:e.isActive?"Aktywne":"Nieaktywne"})})]}),(0,s.jsxs)("div",{className:o().offerContent,children:[(0,s.jsx)("h3",{className:o().offerTitle,children:e.title}),(0,s.jsx)("p",{className:o().offerDescription,children:e.description.length>100?"".concat(e.description.substring(0,100),"..."):e.description}),(0,s.jsxs)("div",{className:o().offerMeta,children:[(0,s.jsxs)("span",{className:o().offerPrice,children:[e.price," zł"]}),(0,s.jsx)("span",{className:o().offerLocation,children:e.location})]}),(0,s.jsxs)("div",{className:o().offerFooter,children:[(0,s.jsx)("span",{className:o().offerCategory,children:e.category}),(0,s.jsx)("span",{className:o().offerDate,children:formatDate(e.createdAt)})]})]})]},e.id)):(0,s.jsxs)("div",{className:o().emptyState,children:[(0,s.jsx)("span",{className:o().emptyIcon,children:"\uD83D\uDCCB"}),(0,s.jsx)("h3",{children:"Brak ogłoszeń"}),(0,s.jsx)("p",{children:"Ten użytkownik nie ma jeszcze żadnych ogłoszeń."})]})}),"ratings"===g&&(0,s.jsx)("div",{className:o().ratingsContainer,children:d.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:o().ratingsSummary,children:(0,s.jsxs)("div",{className:o().averageRating,children:[(0,s.jsx)("span",{className:o().ratingNumber,children:(null==r?void 0:r.averageRating)?r.averageRating.toFixed(1):"0.0"}),(0,s.jsx)("div",{className:o().ratingStars,children:renderStars(Math.round((null==r?void 0:r.averageRating)||0))}),(0,s.jsxs)("span",{className:o().ratingCount,children:["na podstawie ",d.length," ocen"]})]})}),(0,s.jsx)("div",{className:o().ratingsList,children:d.map(e=>(0,s.jsxs)("div",{className:o().ratingCard,children:[(0,s.jsxs)("div",{className:o().ratingHeader,children:[(0,s.jsx)("div",{className:o().ratingStars,children:renderStars(e.rating)}),(0,s.jsx)("span",{className:o().ratingDate,children:formatDate(e.createdAt)})]}),(0,s.jsx)("p",{className:o().ratingComment,children:e.comment}),(0,s.jsxs)("div",{className:o().ratingFooter,children:[(0,s.jsxs)("span",{className:o().ratingOffer,children:["Za: ",e.offerTitle]}),(0,s.jsxs)("span",{className:o().ratingFrom,children:["Od: ",e.fromUser]})]})]},e.id))})]}):(0,s.jsxs)("div",{className:o().emptyState,children:[(0,s.jsx)("span",{className:o().emptyIcon,children:"⭐"}),(0,s.jsx)("h3",{children:"Brak ocen"}),(0,s.jsx)("p",{children:"Ten użytkownik nie ma jeszcze żadnych ocen."})]})})]})]}),(0,s.jsx)(c.Z,{})]})}},862:function(e){e.exports={footer:"Footer_footer__pQtti"}},4858:function(e){e.exports={container:"UserProfile_container__GzES2",profileContainer:"UserProfile_profileContainer__Ut693",loading:"UserProfile_loading__GVy8l",spinner:"UserProfile_spinner__6Exdg",spin:"UserProfile_spin__ilI8E",profileHeader:"UserProfile_profileHeader__zrwIz",userAvatar:"UserProfile_userAvatar__us8eF",avatarText:"UserProfile_avatarText__5BWq4",userInfo:"UserProfile_userInfo__s_eXK",userName:"UserProfile_userName__Os3sW",userEmail:"UserProfile_userEmail__Fu1x9",userStats:"UserProfile_userStats__d0F_H",statItem:"UserProfile_statItem__trHVT",statNumber:"UserProfile_statNumber__1RUnx",statLabel:"UserProfile_statLabel__59G2k",memberSince:"UserProfile_memberSince__dkRWL",tabNavigation:"UserProfile_tabNavigation__UklPV",tabButton:"UserProfile_tabButton__BLViN",activeTab:"UserProfile_activeTab__rcVKl",tabIcon:"UserProfile_tabIcon__Wwvmu",tabContent:"UserProfile_tabContent__0nM7l",offersGrid:"UserProfile_offersGrid__Zvap0",offerCard:"UserProfile_offerCard__E0ZCV",offerImage:"UserProfile_offerImage__HnmQy",offerStatus:"UserProfile_offerStatus__eG81I",activeStatus:"UserProfile_activeStatus__wJE__",inactiveStatus:"UserProfile_inactiveStatus__8q0oA",offerContent:"UserProfile_offerContent__N1lyk",offerTitle:"UserProfile_offerTitle__Mo1qN",offerDescription:"UserProfile_offerDescription__uazpk",offerMeta:"UserProfile_offerMeta__A9t7w",offerPrice:"UserProfile_offerPrice__coLmo",offerLocation:"UserProfile_offerLocation__u87DH",offerFooter:"UserProfile_offerFooter__oVUXy",offerCategory:"UserProfile_offerCategory__uhoDL",offerDate:"UserProfile_offerDate__dyKg_",ratingsContainer:"UserProfile_ratingsContainer__aGosN",ratingsSummary:"UserProfile_ratingsSummary__TOkns",averageRating:"UserProfile_averageRating__crtq8",ratingNumber:"UserProfile_ratingNumber__YZIxl",ratingStars:"UserProfile_ratingStars__ympZG",starFilled:"UserProfile_starFilled__YxtPV",starEmpty:"UserProfile_starEmpty__T9srI",ratingCount:"UserProfile_ratingCount__z2nj3",ratingsList:"UserProfile_ratingsList__LxkC0",ratingCard:"UserProfile_ratingCard__F0wT1",ratingHeader:"UserProfile_ratingHeader__Ie3pG",ratingDate:"UserProfile_ratingDate__AUDFg",ratingComment:"UserProfile_ratingComment__QMg6T",ratingFooter:"UserProfile_ratingFooter__pP0Lp",ratingOffer:"UserProfile_ratingOffer__5eaUE",ratingFrom:"UserProfile_ratingFrom__ieTJG",emptyState:"UserProfile_emptyState__Gw2xg",emptyIcon:"UserProfile_emptyIcon__BfJfH"}}},function(e){e.O(0,[424,68,372,774,888,179],function(){return e(e.s=8418)}),_N_E=e.O()}]);