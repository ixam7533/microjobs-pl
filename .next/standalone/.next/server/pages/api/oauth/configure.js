"use strict";(()=>{var e={};e.id=3636,e.ids=[3636],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},4581:(e,t,s)=>{s.r(t),s.d(t,{config:()=>u,default:()=>i,routeModule:()=>l});var r={};s.r(r),s.d(r,{default:()=>handler});var a=s(1802),o=s(7153),n=s(6249);async function handler(e,t){if("POST"!==e.method)return t.status(405).json({message:"Method not allowed"});let{provider:r,clientId:a,clientSecret:o}=e.body;if(!r||!a||!o)return t.status(400).json({message:"Missing required fields"});if("google"===r&&!a.includes("googleusercontent.com"))return t.status(400).json({message:"Invalid Google Client ID format"});if("facebook"===r&&!/^\d+$/.test(a))return t.status(400).json({message:"Invalid Facebook App ID format"});let n=s(7147),i=s(1017),u=i.join(process.cwd(),".env.local");try{let e=n.readFileSync(u,"utf8");"google"===r?e=(e=e.replace(/GOOGLE_CLIENT_ID=.*/,`GOOGLE_CLIENT_ID=${a}`)).replace(/GOOGLE_CLIENT_SECRET=.*/,`GOOGLE_CLIENT_SECRET=${o}`):"facebook"===r&&(e=(e=e.replace(/FACEBOOK_CLIENT_ID=.*/,`FACEBOOK_CLIENT_ID=${a}`)).replace(/FACEBOOK_CLIENT_SECRET=.*/,`FACEBOOK_CLIENT_SECRET=${o}`)),n.writeFileSync(u,e),t.status(200).json({message:`${r} OAuth configured successfully`,restart:!0})}catch(e){t.status(500).json({message:"Error updating environment file"})}}let i=(0,n.l)(r,"default"),u=(0,n.l)(r,"config"),l=new a.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/oauth/configure",pathname:"/api/oauth/configure",bundlePath:"",filename:""},userland:r})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[4222],()=>__webpack_exec__(4581));module.exports=s})();