"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/offers/promote";
exports.ids = ["pages/api/offers/promote"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Foffers%2Fpromote&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Foffers%2Fpromote.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Foffers%2Fpromote&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Foffers%2Fpromote.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_offers_promote_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/offers/promote.ts */ \"(api)/./pages/api/offers/promote.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_offers_promote_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_offers_promote_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/offers/promote\",\n        pathname: \"/api/offers/promote\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_offers_promote_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRm9mZmVycyUyRnByb21vdGUmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRm9mZmVycyUyRnByb21vdGUudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDMEQ7QUFDMUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHlEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyx5REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vPzUzODQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9vZmZlcnMvcHJvbW90ZS50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL29mZmVycy9wcm9tb3RlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvb2ZmZXJzL3Byb21vdGVcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Foffers%2Fpromote&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Foffers%2Fpromote.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/jwt.ts":
/*!********************!*\
  !*** ./lib/jwt.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signToken: () => (/* binding */ signToken),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n\nconst JWT_SECRET = process.env.JWT_SECRET;\nif (!JWT_SECRET) throw new Error(\"JWT_SECRET is missing in environment variables\");\nfunction signToken(payload, expiresIn = \"7d\") {\n    const options = {\n        expiresIn: String(expiresIn)\n    };\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign(payload, JWT_SECRET, options);\n}\nfunction verifyToken(token) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, JWT_SECRET);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvand0LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBOEI7QUFFOUIsTUFBTUMsYUFBYUMsUUFBUUMsR0FBRyxDQUFDRixVQUFVO0FBQ3pDLElBQUksQ0FBQ0EsWUFBWSxNQUFNLElBQUlHLE1BQU07QUFFMUIsU0FBU0MsVUFBVUMsT0FBNEIsRUFBRUMsWUFBNkIsSUFBSTtJQUN2RixNQUFNQyxVQUFlO1FBQUVELFdBQVdFLE9BQU9GO0lBQVc7SUFDcEQsT0FBT1Asd0RBQVEsQ0FBQ00sU0FBU0wsWUFBc0JPO0FBQ2pEO0FBRU8sU0FBU0csWUFBWUMsS0FBYTtJQUN2QyxPQUFPWiwwREFBVSxDQUFDWSxPQUFPWDtBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9qd3QudHM/ZWEyMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbidcblxuY29uc3QgSldUX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVRcbmlmICghSldUX1NFQ1JFVCkgdGhyb3cgbmV3IEVycm9yKCdKV1RfU0VDUkVUIGlzIG1pc3NpbmcgaW4gZW52aXJvbm1lbnQgdmFyaWFibGVzJylcblxuZXhwb3J0IGZ1bmN0aW9uIHNpZ25Ub2tlbihwYXlsb2FkOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBleHBpcmVzSW46IHN0cmluZyB8IG51bWJlciA9ICc3ZCcpIHtcbiAgY29uc3Qgb3B0aW9uczogYW55ID0geyBleHBpcmVzSW46IFN0cmluZyhleHBpcmVzSW4pIH1cbiAgcmV0dXJuIGp3dC5zaWduKHBheWxvYWQsIEpXVF9TRUNSRVQgYXMgc3RyaW5nLCBvcHRpb25zKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdmVyaWZ5VG9rZW4odG9rZW46IHN0cmluZykge1xuICByZXR1cm4gand0LnZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVCBhcyBzdHJpbmcpXG59Il0sIm5hbWVzIjpbImp3dCIsIkpXVF9TRUNSRVQiLCJwcm9jZXNzIiwiZW52IiwiRXJyb3IiLCJzaWduVG9rZW4iLCJwYXlsb2FkIiwiZXhwaXJlc0luIiwib3B0aW9ucyIsIlN0cmluZyIsInNpZ24iLCJ2ZXJpZnlUb2tlbiIsInRva2VuIiwidmVyaWZ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/jwt.ts\n");

/***/ }),

/***/ "(api)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQUU3QyxNQUFNQyxTQUFTLElBQUlELHdEQUFZQTtBQUMvQixpRUFBZUMsTUFBTUEsRUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9wcmlzbWEudHM/OTgyMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcblxuY29uc3QgcHJpc21hID0gbmV3IFByaXNtYUNsaWVudCgpXG5leHBvcnQgZGVmYXVsdCBwcmlzbWFcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJwcmlzbWEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/prisma.ts\n");

/***/ }),

/***/ "(api)/./pages/api/offers/promote.ts":
/*!*************************************!*\
  !*** ./pages/api/offers/promote.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_jwt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/jwt */ \"(api)/./lib/jwt.ts\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/prisma */ \"(api)/./lib/prisma.ts\");\n// pages/api/offers/promote.ts\n\n\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        // Pobierz token z cookies zamiast nagłówka Authorization\n        const token = req.cookies.token;\n        console.log(\"\\uD83D\\uDE80 Promote API called:\", {\n            hasToken: !!token\n        });\n        if (!token) {\n            return res.status(401).json({\n                error: \"Token required\"\n            });\n        }\n        const decoded = (0,_lib_jwt__WEBPACK_IMPORTED_MODULE_0__.verifyToken)(token);\n        if (!decoded || !decoded.id) {\n            return res.status(401).json({\n                error: \"Invalid token\"\n            });\n        }\n        console.log(\"\\uD83D\\uDC64 User decoded:\", decoded.email);\n        const { offerId } = req.body;\n        if (!offerId) {\n            return res.status(400).json({\n                error: \"Offer ID is required\"\n            });\n        }\n        console.log(\"\\uD83D\\uDCCB Promoting offer:\", offerId);\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].user.findUnique({\n            where: {\n                id: decoded.id\n            }\n        });\n        if (!user) {\n            return res.status(404).json({\n                error: \"User not found\"\n            });\n        }\n        console.log(\"\\uD83D\\uDC64 User found:\", {\n            id: user.id,\n            email: user.email,\n            subscriptionType: user.subscriptionType,\n            subscriptionEnd: user.subscriptionEnd,\n            promotionsUsed: user.promotionsUsed\n        });\n        // Check if user has active subscription and promotion limits\n        const now = new Date();\n        const hasActiveSubscription = user.subscriptionEnd && user.subscriptionEnd > now;\n        if (hasActiveSubscription) {\n            // Sprawdź limit promocji dla użytkowników PRO/PRO+\n            if (user.subscriptionType === \"PRO_PLUS\") {\n                // PRO+ ma limit 3 promocji miesięcznie\n                if (user.promotionsUsed >= 3) {\n                    return res.status(403).json({\n                        error: \"Wykorzystałeś już wszystkie promocje PRO+ w tym miesiącu (3/3)\"\n                    });\n                }\n            } else if (user.subscriptionType === \"PRO\") {\n                // PRO ma limit 1 darmowe promowanie miesięcznie\n                if (user.promotionsUsed >= 1) {\n                    return res.status(403).json({\n                        error: \"Wykorzystałeś już swoją darmową promocję PRO w tym miesiącu (1/1). Możesz promować za opłatą.\"\n                    });\n                }\n            }\n        }\n        // Użytkownicy bez PRO mogą promować za opłatą - nie sprawdzamy limitów\n        // Check if offer exists and belongs to user\n        const offer = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].offer.findUnique({\n            where: {\n                id: parseInt(offerId)\n            }\n        });\n        if (!offer) {\n            return res.status(404).json({\n                error: \"Offer not found\"\n            });\n        }\n        if (offer.ownerId !== decoded.id) {\n            return res.status(403).json({\n                error: \"You can only promote your own offers\"\n            });\n        }\n        // Check if offer is already promoted\n        if (offer.promoted && offer.promotedUntil && offer.promotedUntil > now) {\n            return res.status(400).json({\n                error: \"Offer is already promoted\"\n            });\n        }\n        // Automatyczne czyszczenie wygasłych promocji\n        if (offer.promoted && offer.promotedUntil && offer.promotedUntil <= now) {\n            await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].offer.update({\n                where: {\n                    id: parseInt(offerId)\n                },\n                data: {\n                    promoted: false,\n                    promotedUntil: null\n                }\n            });\n        }\n        // Promote offer for 7 days\n        const promotedUntil = new Date();\n        promotedUntil.setDate(promotedUntil.getDate() + 7);\n        await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].offer.update({\n            where: {\n                id: parseInt(offerId)\n            },\n            data: {\n                promoted: true,\n                promotedUntil\n            }\n        });\n        // Update user's promotions used for both PRO and PRO+ users\n        if (hasActiveSubscription) {\n            console.log(\"\\uD83D\\uDD04 Updating promotions counter for:\", user.subscriptionType);\n            if (user.subscriptionType === \"PRO\") {\n                // PRO użytkownicy mają limit promocji, aktualizuj licznik\n                console.log(\"\\uD83D\\uDCCA PRO: Incrementing from\", user.promotionsUsed, \"to\", user.promotionsUsed + 1);\n                await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].user.update({\n                    where: {\n                        id: decoded.id\n                    },\n                    data: {\n                        promotionsUsed: user.promotionsUsed + 1\n                    }\n                });\n            } else if (user.subscriptionType === \"PRO_PLUS\") {\n                // PRO+ ma limit 3 promocji miesięcznie, aktualizuj licznik\n                console.log(\"⭐ PRO_PLUS: Incrementing from\", user.promotionsUsed, \"to\", user.promotionsUsed + 1);\n                const updatedUser = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].user.update({\n                    where: {\n                        id: decoded.id\n                    },\n                    data: {\n                        promotionsUsed: user.promotionsUsed + 1\n                    }\n                });\n                console.log(\"✅ PRO_PLUS: Updated successfully, new value:\", updatedUser.promotionsUsed);\n            }\n        } else {\n            console.log(\"❌ No active subscription, skipping promotions counter update\");\n        }\n        // Create promotion usage record\n        await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].promotionUsage.create({\n            data: {\n                userId: decoded.id,\n                offerId: parseInt(offerId)\n            }\n        });\n        // Calculate remaining promotions for response\n        let promotionsRemaining = 0;\n        if (hasActiveSubscription) {\n            if (user.subscriptionType === \"PRO_PLUS\") {\n                // PRO+ ma limit 3 promocji miesięcznie\n                promotionsRemaining = Math.max(0, 3 - (user.promotionsUsed + 1));\n            } else if (user.subscriptionType === \"PRO\") {\n                // PRO ma limit 1 darmowe promowanie miesięcznie\n                promotionsRemaining = Math.max(0, 1 - (user.promotionsUsed + 1));\n            }\n        }\n        res.status(200).json({\n            success: true,\n            message: \"Offer promoted successfully\",\n            promotedUntil,\n            promotionsRemaining,\n            paymentProcessed: !hasActiveSubscription || user.subscriptionType === \"PRO\" // Info czy była płatność\n        });\n    } catch (error) {\n        console.error(\"Promote offer error:\", error);\n        res.status(500).json({\n            error: \"Internal server error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FBUztZQUNUQyxTQUFTO1lBQ1RiO1lBQ0FTO1lBQ0FLLGtCQUFrQixDQUFDbkIseUJBQXlCUixLQUFLRyxnQkFBZ0IsS0FBSyxNQUFNLHlCQUF5QjtRQUN2RztJQUVGLEVBQUUsT0FBT2QsT0FBTztRQUNkRyxRQUFRSCxLQUFLLENBQUMsd0JBQXdCQTtRQUN0Q0osSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQXdCO0lBQ3hEO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9wYWdlcy9hcGkvb2ZmZXJzL3Byb21vdGUudHM/MjNhYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBwYWdlcy9hcGkvb2ZmZXJzL3Byb21vdGUudHNcbmltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0J1xuaW1wb3J0IHsgdmVyaWZ5VG9rZW4gfSBmcm9tICcuLi8uLi8uLi9saWIvand0J1xuaW1wb3J0IHByaXNtYSBmcm9tICcuLi8uLi8uLi9saWIvcHJpc21hJ1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSlcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gUG9iaWVyeiB0b2tlbiB6IGNvb2tpZXMgemFtaWFzdCBuYWfFgsOzd2thIEF1dGhvcml6YXRpb25cbiAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLnRva2VuXG4gICAgXG4gICAgY29uc29sZS5sb2coJ/CfmoAgUHJvbW90ZSBBUEkgY2FsbGVkOicsIHsgaGFzVG9rZW46ICEhdG9rZW4gfSlcbiAgICBcbiAgICBpZiAoIXRva2VuKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ1Rva2VuIHJlcXVpcmVkJyB9KVxuICAgIH1cblxuICAgIGNvbnN0IGRlY29kZWQgPSB2ZXJpZnlUb2tlbih0b2tlbikgYXMgYW55XG4gICAgXG4gICAgaWYgKCFkZWNvZGVkIHx8ICFkZWNvZGVkLmlkKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgdG9rZW4nIH0pXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ/CfkaQgVXNlciBkZWNvZGVkOicsIGRlY29kZWQuZW1haWwpXG5cbiAgICBjb25zdCB7IG9mZmVySWQgfSA9IHJlcS5ib2R5XG5cbiAgICBpZiAoIW9mZmVySWQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnT2ZmZXIgSUQgaXMgcmVxdWlyZWQnIH0pXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ/Cfk4sgUHJvbW90aW5nIG9mZmVyOicsIG9mZmVySWQpXG5cbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZDogZGVjb2RlZC5pZCB9XG4gICAgfSlcblxuICAgIGlmICghdXNlcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdVc2VyIG5vdCBmb3VuZCcgfSlcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygn8J+RpCBVc2VyIGZvdW5kOicsIHsgXG4gICAgICBpZDogdXNlci5pZCxcbiAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLCBcbiAgICAgIHN1YnNjcmlwdGlvblR5cGU6IHVzZXIuc3Vic2NyaXB0aW9uVHlwZSxcbiAgICAgIHN1YnNjcmlwdGlvbkVuZDogdXNlci5zdWJzY3JpcHRpb25FbmQsXG4gICAgICBwcm9tb3Rpb25zVXNlZDogdXNlci5wcm9tb3Rpb25zVXNlZFxuICAgIH0pXG5cbiAgICAvLyBDaGVjayBpZiB1c2VyIGhhcyBhY3RpdmUgc3Vic2NyaXB0aW9uIGFuZCBwcm9tb3Rpb24gbGltaXRzXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKVxuICAgIGNvbnN0IGhhc0FjdGl2ZVN1YnNjcmlwdGlvbiA9IHVzZXIuc3Vic2NyaXB0aW9uRW5kICYmIHVzZXIuc3Vic2NyaXB0aW9uRW5kID4gbm93XG4gICAgXG4gICAgaWYgKGhhc0FjdGl2ZVN1YnNjcmlwdGlvbikge1xuICAgICAgLy8gU3ByYXdkxbogbGltaXQgcHJvbW9jamkgZGxhIHXFvHl0a293bmlrw7N3IFBSTy9QUk8rXG4gICAgICBpZiAodXNlci5zdWJzY3JpcHRpb25UeXBlID09PSAnUFJPX1BMVVMnKSB7XG4gICAgICAgIC8vIFBSTysgbWEgbGltaXQgMyBwcm9tb2NqaSBtaWVzacSZY3puaWVcbiAgICAgICAgaWYgKHVzZXIucHJvbW90aW9uc1VzZWQgPj0gMykge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnV3lrb3J6eXN0YcWCZcWbIGp1xbwgd3N6eXN0a2llIHByb21vY2plIFBSTysgdyB0eW0gbWllc2nEhWN1ICgzLzMpJyB9KVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHVzZXIuc3Vic2NyaXB0aW9uVHlwZSA9PT0gJ1BSTycpIHtcbiAgICAgICAgLy8gUFJPIG1hIGxpbWl0IDEgZGFybW93ZSBwcm9tb3dhbmllIG1pZXNpxJljem5pZVxuICAgICAgICBpZiAodXNlci5wcm9tb3Rpb25zVXNlZCA+PSAxKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdXeWtvcnp5c3RhxYJlxZsganXFvCBzd29qxIUgZGFybW93xIUgcHJvbW9jasSZIFBSTyB3IHR5bSBtaWVzacSFY3UgKDEvMSkuIE1vxbxlc3ogcHJvbW93YcSHIHphIG9wxYJhdMSFLicgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBVxbx5dGtvd25pY3kgYmV6IFBSTyBtb2fEhSBwcm9tb3dhxIcgemEgb3DFgmF0xIUgLSBuaWUgc3ByYXdkemFteSBsaW1pdMOzd1xuXG4gICAgLy8gQ2hlY2sgaWYgb2ZmZXIgZXhpc3RzIGFuZCBiZWxvbmdzIHRvIHVzZXJcbiAgICBjb25zdCBvZmZlciA9IGF3YWl0IHByaXNtYS5vZmZlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBwYXJzZUludChvZmZlcklkKSB9XG4gICAgfSlcblxuICAgIGlmICghb2ZmZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnT2ZmZXIgbm90IGZvdW5kJyB9KVxuICAgIH1cblxuICAgIGlmIChvZmZlci5vd25lcklkICE9PSBkZWNvZGVkLmlkKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ1lvdSBjYW4gb25seSBwcm9tb3RlIHlvdXIgb3duIG9mZmVycycgfSlcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBvZmZlciBpcyBhbHJlYWR5IHByb21vdGVkXG4gICAgaWYgKG9mZmVyLnByb21vdGVkICYmIG9mZmVyLnByb21vdGVkVW50aWwgJiYgb2ZmZXIucHJvbW90ZWRVbnRpbCA+IG5vdykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdPZmZlciBpcyBhbHJlYWR5IHByb21vdGVkJyB9KVxuICAgIH1cblxuICAgIC8vIEF1dG9tYXR5Y3puZSBjenlzemN6ZW5pZSB3eWdhc8WCeWNoIHByb21vY2ppXG4gICAgaWYgKG9mZmVyLnByb21vdGVkICYmIG9mZmVyLnByb21vdGVkVW50aWwgJiYgb2ZmZXIucHJvbW90ZWRVbnRpbCA8PSBub3cpIHtcbiAgICAgIGF3YWl0IHByaXNtYS5vZmZlci51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogcGFyc2VJbnQob2ZmZXJJZCkgfSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHByb21vdGVkOiBmYWxzZSxcbiAgICAgICAgICBwcm9tb3RlZFVudGlsOiBudWxsXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gUHJvbW90ZSBvZmZlciBmb3IgNyBkYXlzXG4gICAgY29uc3QgcHJvbW90ZWRVbnRpbCA9IG5ldyBEYXRlKClcbiAgICBwcm9tb3RlZFVudGlsLnNldERhdGUocHJvbW90ZWRVbnRpbC5nZXREYXRlKCkgKyA3KVxuXG4gICAgYXdhaXQgcHJpc21hLm9mZmVyLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogcGFyc2VJbnQob2ZmZXJJZCkgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgcHJvbW90ZWQ6IHRydWUsXG4gICAgICAgIHByb21vdGVkVW50aWxcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gVXBkYXRlIHVzZXIncyBwcm9tb3Rpb25zIHVzZWQgZm9yIGJvdGggUFJPIGFuZCBQUk8rIHVzZXJzXG4gICAgaWYgKGhhc0FjdGl2ZVN1YnNjcmlwdGlvbikge1xuICAgICAgY29uc29sZS5sb2coJ/CflIQgVXBkYXRpbmcgcHJvbW90aW9ucyBjb3VudGVyIGZvcjonLCB1c2VyLnN1YnNjcmlwdGlvblR5cGUpXG4gICAgICBpZiAodXNlci5zdWJzY3JpcHRpb25UeXBlID09PSAnUFJPJykge1xuICAgICAgICAvLyBQUk8gdcW8eXRrb3duaWN5IG1hasSFIGxpbWl0IHByb21vY2ppLCBha3R1YWxpenVqIGxpY3puaWtcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfk4ogUFJPOiBJbmNyZW1lbnRpbmcgZnJvbScsIHVzZXIucHJvbW90aW9uc1VzZWQsICd0bycsIHVzZXIucHJvbW90aW9uc1VzZWQgKyAxKVxuICAgICAgICBhd2FpdCBwcmlzbWEudXNlci51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiBkZWNvZGVkLmlkIH0sXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgcHJvbW90aW9uc1VzZWQ6IHVzZXIucHJvbW90aW9uc1VzZWQgKyAxXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIGlmICh1c2VyLnN1YnNjcmlwdGlvblR5cGUgPT09ICdQUk9fUExVUycpIHtcbiAgICAgICAgLy8gUFJPKyBtYSBsaW1pdCAzIHByb21vY2ppIG1pZXNpxJljem5pZSwgYWt0dWFsaXp1aiBsaWN6bmlrXG4gICAgICAgIGNvbnNvbGUubG9nKCfirZAgUFJPX1BMVVM6IEluY3JlbWVudGluZyBmcm9tJywgdXNlci5wcm9tb3Rpb25zVXNlZCwgJ3RvJywgdXNlci5wcm9tb3Rpb25zVXNlZCArIDEpXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRVc2VyID0gYXdhaXQgcHJpc21hLnVzZXIudXBkYXRlKHtcbiAgICAgICAgICB3aGVyZTogeyBpZDogZGVjb2RlZC5pZCB9LFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHByb21vdGlvbnNVc2VkOiB1c2VyLnByb21vdGlvbnNVc2VkICsgMVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBQUk9fUExVUzogVXBkYXRlZCBzdWNjZXNzZnVsbHksIG5ldyB2YWx1ZTonLCB1cGRhdGVkVXNlci5wcm9tb3Rpb25zVXNlZClcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ+KdjCBObyBhY3RpdmUgc3Vic2NyaXB0aW9uLCBza2lwcGluZyBwcm9tb3Rpb25zIGNvdW50ZXIgdXBkYXRlJylcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgcHJvbW90aW9uIHVzYWdlIHJlY29yZFxuICAgIGF3YWl0IHByaXNtYS5wcm9tb3Rpb25Vc2FnZS5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICB1c2VySWQ6IGRlY29kZWQuaWQsXG4gICAgICAgIG9mZmVySWQ6IHBhcnNlSW50KG9mZmVySWQpXG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIENhbGN1bGF0ZSByZW1haW5pbmcgcHJvbW90aW9ucyBmb3IgcmVzcG9uc2VcbiAgICBsZXQgcHJvbW90aW9uc1JlbWFpbmluZyA9IDBcbiAgICBpZiAoaGFzQWN0aXZlU3Vic2NyaXB0aW9uKSB7XG4gICAgICBpZiAodXNlci5zdWJzY3JpcHRpb25UeXBlID09PSAnUFJPX1BMVVMnKSB7XG4gICAgICAgIC8vIFBSTysgbWEgbGltaXQgMyBwcm9tb2NqaSBtaWVzacSZY3puaWVcbiAgICAgICAgcHJvbW90aW9uc1JlbWFpbmluZyA9IE1hdGgubWF4KDAsIDMgLSAodXNlci5wcm9tb3Rpb25zVXNlZCArIDEpKVxuICAgICAgfSBlbHNlIGlmICh1c2VyLnN1YnNjcmlwdGlvblR5cGUgPT09ICdQUk8nKSB7XG4gICAgICAgIC8vIFBSTyBtYSBsaW1pdCAxIGRhcm1vd2UgcHJvbW93YW5pZSBtaWVzacSZY3puaWVcbiAgICAgICAgcHJvbW90aW9uc1JlbWFpbmluZyA9IE1hdGgubWF4KDAsIDEgLSAodXNlci5wcm9tb3Rpb25zVXNlZCArIDEpKVxuICAgICAgfVxuICAgIH1cblxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgXG4gICAgICBzdWNjZXNzOiB0cnVlLCBcbiAgICAgIG1lc3NhZ2U6ICdPZmZlciBwcm9tb3RlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgcHJvbW90ZWRVbnRpbCxcbiAgICAgIHByb21vdGlvbnNSZW1haW5pbmcsXG4gICAgICBwYXltZW50UHJvY2Vzc2VkOiAhaGFzQWN0aXZlU3Vic2NyaXB0aW9uIHx8IHVzZXIuc3Vic2NyaXB0aW9uVHlwZSA9PT0gJ1BSTycgLy8gSW5mbyBjenkgYnnFgmEgcMWCYXRub8WbxIdcbiAgICB9KVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignUHJvbW90ZSBvZmZlciBlcnJvcjonLCBlcnJvcilcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KVxuICB9XG59XG4iXSwibmFtZXMiOlsidmVyaWZ5VG9rZW4iLCJwcmlzbWEiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwidG9rZW4iLCJjb29raWVzIiwiY29uc29sZSIsImxvZyIsImhhc1Rva2VuIiwiZGVjb2RlZCIsImlkIiwiZW1haWwiLCJvZmZlcklkIiwiYm9keSIsInVzZXIiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJzdWJzY3JpcHRpb25UeXBlIiwic3Vic2NyaXB0aW9uRW5kIiwicHJvbW90aW9uc1VzZWQiLCJub3ciLCJEYXRlIiwiaGFzQWN0aXZlU3Vic2NyaXB0aW9uIiwib2ZmZXIiLCJwYXJzZUludCIsIm93bmVySWQiLCJwcm9tb3RlZCIsInByb21vdGVkVW50aWwiLCJ1cGRhdGUiLCJkYXRhIiwic2V0RGF0ZSIsImdldERhdGUiLCJ1cGRhdGVkVXNlciIsInByb21vdGlvblVzYWdlIiwiY3JlYXRlIiwidXNlcklkIiwicHJvbW90aW9uc1JlbWFpbmluZyIsIk1hdGgiLCJtYXgiLCJzdWNjZXNzIiwibWVzc2FnZSIsInBheW1lbnRQcm9jZXNzZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/offers/promote.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Foffers%2Fpromote&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Foffers%2Fpromote.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();