"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/chats/[id]";
exports.ids = ["pages/api/chats/[id]"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchats%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fchats%2F%5Bid%5D.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchats%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fchats%2F%5Bid%5D.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_chats_id_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/chats/[id].ts */ \"(api)/./pages/api/chats/[id].ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_chats_id_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_chats_id_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/chats/[id]\",\n        pathname: \"/api/chats/[id]\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_chats_id_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmNoYXRzJTJGJTVCaWQlNUQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmNoYXRzJTJGJTVCaWQlNUQudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDc0Q7QUFDdEQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLG1EQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxtREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vP2M2YjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9jaGF0cy9baWRdLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY2hhdHMvW2lkXVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NoYXRzL1tpZF1cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchats%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fchats%2F%5Bid%5D.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/jwt.ts":
/*!********************!*\
  !*** ./lib/jwt.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signToken: () => (/* binding */ signToken),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n\nconst JWT_SECRET = process.env.JWT_SECRET;\nif (!JWT_SECRET) throw new Error(\"JWT_SECRET is missing in environment variables\");\nfunction signToken(payload, expiresIn = \"7d\") {\n    const options = {\n        expiresIn: String(expiresIn)\n    };\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign(payload, JWT_SECRET, options);\n}\nfunction verifyToken(token) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, JWT_SECRET);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvand0LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBOEI7QUFFOUIsTUFBTUMsYUFBYUMsUUFBUUMsR0FBRyxDQUFDRixVQUFVO0FBQ3pDLElBQUksQ0FBQ0EsWUFBWSxNQUFNLElBQUlHLE1BQU07QUFFMUIsU0FBU0MsVUFBVUMsT0FBNEIsRUFBRUMsWUFBNkIsSUFBSTtJQUN2RixNQUFNQyxVQUFlO1FBQUVELFdBQVdFLE9BQU9GO0lBQVc7SUFDcEQsT0FBT1Asd0RBQVEsQ0FBQ00sU0FBU0wsWUFBc0JPO0FBQ2pEO0FBRU8sU0FBU0csWUFBWUMsS0FBYTtJQUN2QyxPQUFPWiwwREFBVSxDQUFDWSxPQUFPWDtBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9qd3QudHM/ZWEyMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbidcblxuY29uc3QgSldUX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVRcbmlmICghSldUX1NFQ1JFVCkgdGhyb3cgbmV3IEVycm9yKCdKV1RfU0VDUkVUIGlzIG1pc3NpbmcgaW4gZW52aXJvbm1lbnQgdmFyaWFibGVzJylcblxuZXhwb3J0IGZ1bmN0aW9uIHNpZ25Ub2tlbihwYXlsb2FkOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBleHBpcmVzSW46IHN0cmluZyB8IG51bWJlciA9ICc3ZCcpIHtcbiAgY29uc3Qgb3B0aW9uczogYW55ID0geyBleHBpcmVzSW46IFN0cmluZyhleHBpcmVzSW4pIH1cbiAgcmV0dXJuIGp3dC5zaWduKHBheWxvYWQsIEpXVF9TRUNSRVQgYXMgc3RyaW5nLCBvcHRpb25zKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdmVyaWZ5VG9rZW4odG9rZW46IHN0cmluZykge1xuICByZXR1cm4gand0LnZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVCBhcyBzdHJpbmcpXG59Il0sIm5hbWVzIjpbImp3dCIsIkpXVF9TRUNSRVQiLCJwcm9jZXNzIiwiZW52IiwiRXJyb3IiLCJzaWduVG9rZW4iLCJwYXlsb2FkIiwiZXhwaXJlc0luIiwib3B0aW9ucyIsIlN0cmluZyIsInNpZ24iLCJ2ZXJpZnlUb2tlbiIsInRva2VuIiwidmVyaWZ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/jwt.ts\n");

/***/ }),

/***/ "(api)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQUU3QyxNQUFNQyxTQUFTLElBQUlELHdEQUFZQTtBQUMvQixpRUFBZUMsTUFBTUEsRUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9wcmlzbWEudHM/OTgyMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcblxuY29uc3QgcHJpc21hID0gbmV3IFByaXNtYUNsaWVudCgpXG5leHBvcnQgZGVmYXVsdCBwcmlzbWFcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJwcmlzbWEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/prisma.ts\n");

/***/ }),

/***/ "(api)/./pages/api/chats/[id].ts":
/*!*********************************!*\
  !*** ./pages/api/chats/[id].ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_jwt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/jwt */ \"(api)/./lib/jwt.ts\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/prisma */ \"(api)/./lib/prisma.ts\");\n\n\nasync function handler(req, res) {\n    const { id } = req.query;\n    const chatId = parseInt(id);\n    if (!chatId) {\n        return res.status(400).json({\n            error: \"Invalid chat ID\"\n        });\n    }\n    try {\n        // Verify user authentication\n        const authToken = req.cookies.token;\n        if (!authToken) {\n            return res.status(401).json({\n                error: \"Not authenticated\"\n            });\n        }\n        const payload = (0,_lib_jwt__WEBPACK_IMPORTED_MODULE_0__.verifyToken)(authToken);\n        if (!payload || typeof payload === \"string\" || !payload.id) {\n            return res.status(401).json({\n                error: \"Invalid token\"\n            });\n        }\n        const userId = payload.id;\n        // Check if user has access to this chat\n        const chat = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].chat.findFirst({\n            where: {\n                id: chatId,\n                participants: {\n                    some: {\n                        userId: userId\n                    }\n                }\n            }\n        });\n        if (!chat) {\n            return res.status(404).json({\n                error: \"Chat not found or access denied\"\n            });\n        }\n        if (req.method === \"GET\") {\n            // Get messages for this chat\n            const messages = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].message.findMany({\n                where: {\n                    chatId: chatId\n                },\n                orderBy: {\n                    createdAt: \"asc\"\n                },\n                include: {\n                    sender: true\n                }\n            });\n            const formattedMessages = messages.map((msg)=>({\n                    id: msg.id,\n                    text: msg.content,\n                    fromMe: msg.senderId === userId\n                }));\n            return res.status(200).json(formattedMessages);\n        } else if (req.method === \"POST\") {\n            // Send a new message\n            const { text } = req.body;\n            if (!text || text.trim() === \"\") {\n                return res.status(400).json({\n                    error: \"Message text is required\"\n                });\n            }\n            const message = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].message.create({\n                data: {\n                    content: text.trim(),\n                    senderId: userId,\n                    chatId: chatId\n                }\n            });\n            const newMsg = {\n                id: message.id,\n                text: message.content,\n                fromMe: true\n            };\n            return res.status(200).json(newMsg);\n        } else {\n            return res.status(405).json({\n                error: \"Method not allowed\"\n            });\n        }\n    } catch (error) {\n        console.error(\"Chat API error:\", error);\n        return res.status(500).json({\n            error: \"Internal server error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVEvQixLQUFLLENBQUMsbUJBQW1CQTtRQUNqQyxPQUFPUCxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBd0I7SUFDL0Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3BhZ2VzL2FwaS9jaGF0cy9baWRdLnRzP2NiM2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCdcbmltcG9ydCB7IHZlcmlmeVRva2VuIH0gZnJvbSAnLi4vLi4vLi4vbGliL2p3dCdcbmltcG9ydCBwcmlzbWEgZnJvbSAnLi4vLi4vLi4vbGliL3ByaXNtYSdcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICBjb25zdCB7IGlkIH0gPSByZXEucXVlcnlcbiAgY29uc3QgY2hhdElkID0gcGFyc2VJbnQoaWQgYXMgc3RyaW5nKVxuXG4gIGlmICghY2hhdElkKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGNoYXQgSUQnIH0pXG4gIH1cblxuICB0cnkge1xuICAgIC8vIFZlcmlmeSB1c2VyIGF1dGhlbnRpY2F0aW9uXG4gICAgY29uc3QgYXV0aFRva2VuID0gcmVxLmNvb2tpZXMudG9rZW5cbiAgICBpZiAoIWF1dGhUb2tlbikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdOb3QgYXV0aGVudGljYXRlZCcgfSlcbiAgICB9XG5cbiAgICBjb25zdCBwYXlsb2FkID0gdmVyaWZ5VG9rZW4oYXV0aFRva2VuKVxuICAgIGlmICghcGF5bG9hZCB8fCB0eXBlb2YgcGF5bG9hZCA9PT0gJ3N0cmluZycgfHwgIXBheWxvYWQuaWQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnSW52YWxpZCB0b2tlbicgfSlcbiAgICB9XG5cbiAgICBjb25zdCB1c2VySWQgPSBwYXlsb2FkLmlkXG5cbiAgICAvLyBDaGVjayBpZiB1c2VyIGhhcyBhY2Nlc3MgdG8gdGhpcyBjaGF0XG4gICAgY29uc3QgY2hhdCA9IGF3YWl0IHByaXNtYS5jaGF0LmZpbmRGaXJzdCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBpZDogY2hhdElkLFxuICAgICAgICBwYXJ0aWNpcGFudHM6IHtcbiAgICAgICAgICBzb21lOiB7IHVzZXJJZDogdXNlcklkIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBpZiAoIWNoYXQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnQ2hhdCBub3QgZm91bmQgb3IgYWNjZXNzIGRlbmllZCcgfSlcbiAgICB9XG5cbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcbiAgICAgIC8vIEdldCBtZXNzYWdlcyBmb3IgdGhpcyBjaGF0XG4gICAgICBjb25zdCBtZXNzYWdlcyA9IGF3YWl0IHByaXNtYS5tZXNzYWdlLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHsgY2hhdElkOiBjaGF0SWQgfSxcbiAgICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdhc2MnIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBzZW5kZXI6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgY29uc3QgZm9ybWF0dGVkTWVzc2FnZXMgPSBtZXNzYWdlcy5tYXAobXNnID0+ICh7XG4gICAgICAgIGlkOiBtc2cuaWQsXG4gICAgICAgIHRleHQ6IG1zZy5jb250ZW50LFxuICAgICAgICBmcm9tTWU6IG1zZy5zZW5kZXJJZCA9PT0gdXNlcklkLFxuICAgICAgfSkpXG5cbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihmb3JtYXR0ZWRNZXNzYWdlcylcblxuICAgIH0gZWxzZSBpZiAocmVxLm1ldGhvZCA9PT0gJ1BPU1QnKSB7XG4gICAgICAvLyBTZW5kIGEgbmV3IG1lc3NhZ2VcbiAgICAgIGNvbnN0IHsgdGV4dCB9ID0gcmVxLmJvZHlcblxuICAgICAgaWYgKCF0ZXh0IHx8IHRleHQudHJpbSgpID09PSAnJykge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ01lc3NhZ2UgdGV4dCBpcyByZXF1aXJlZCcgfSlcbiAgICAgIH1cblxuICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHByaXNtYS5tZXNzYWdlLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBjb250ZW50OiB0ZXh0LnRyaW0oKSxcbiAgICAgICAgICBzZW5kZXJJZDogdXNlcklkLFxuICAgICAgICAgIGNoYXRJZDogY2hhdElkLFxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICBjb25zdCBuZXdNc2cgPSB7XG4gICAgICAgIGlkOiBtZXNzYWdlLmlkLFxuICAgICAgICB0ZXh0OiBtZXNzYWdlLmNvbnRlbnQsXG4gICAgICAgIGZyb21NZTogdHJ1ZSxcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKG5ld01zZylcblxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSlcbiAgICB9XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdDaGF0IEFQSSBlcnJvcjonLCBlcnJvcilcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSlcbiAgfVxufVxuIl0sIm5hbWVzIjpbInZlcmlmeVRva2VuIiwicHJpc21hIiwiaGFuZGxlciIsInJlcSIsInJlcyIsImlkIiwicXVlcnkiLCJjaGF0SWQiLCJwYXJzZUludCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsImF1dGhUb2tlbiIsImNvb2tpZXMiLCJ0b2tlbiIsInBheWxvYWQiLCJ1c2VySWQiLCJjaGF0IiwiZmluZEZpcnN0Iiwid2hlcmUiLCJwYXJ0aWNpcGFudHMiLCJzb21lIiwibWV0aG9kIiwibWVzc2FnZXMiLCJtZXNzYWdlIiwiZmluZE1hbnkiLCJvcmRlckJ5IiwiY3JlYXRlZEF0IiwiaW5jbHVkZSIsInNlbmRlciIsImZvcm1hdHRlZE1lc3NhZ2VzIiwibWFwIiwibXNnIiwidGV4dCIsImNvbnRlbnQiLCJmcm9tTWUiLCJzZW5kZXJJZCIsImJvZHkiLCJ0cmltIiwiY3JlYXRlIiwiZGF0YSIsIm5ld01zZyIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/chats/[id].ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchats%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fchats%2F%5Bid%5D.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();