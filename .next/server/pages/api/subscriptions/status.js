"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/subscriptions/status";
exports.ids = ["pages/api/subscriptions/status"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "cookie":
/*!*************************!*\
  !*** external "cookie" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("cookie");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "next-auth/jwt":
/*!********************************!*\
  !*** external "next-auth/jwt" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("next-auth/jwt");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsubscriptions%2Fstatus&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsubscriptions%2Fstatus.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsubscriptions%2Fstatus&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsubscriptions%2Fstatus.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_subscriptions_status_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/subscriptions/status.ts */ \"(api)/./pages/api/subscriptions/status.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_subscriptions_status_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_subscriptions_status_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/subscriptions/status\",\n        pathname: \"/api/subscriptions/status\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_subscriptions_status_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnN1YnNjcmlwdGlvbnMlMkZzdGF0dXMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRnN1YnNjcmlwdGlvbnMlMkZzdGF0dXMudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDZ0U7QUFDaEU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLCtEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQywrREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vPzAwMGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9zdWJzY3JpcHRpb25zL3N0YXR1cy50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3N1YnNjcmlwdGlvbnMvc3RhdHVzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvc3Vic2NyaXB0aW9ucy9zdGF0dXNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsubscriptions%2Fstatus&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsubscriptions%2Fstatus.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getUserFromRequest: () => (/* binding */ getUserFromRequest)\n/* harmony export */ });\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cookie */ \"cookie\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cookie__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _jwt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./jwt */ \"(api)/./lib/jwt.ts\");\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/jwt */ \"next-auth/jwt\");\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth_jwt__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./prisma */ \"(api)/./lib/prisma.ts\");\n// lib/auth.ts\n\n // your existing JWT helper\n\n\nasync function getUserFromRequest(req) {\n    // Sprawdź NextAuth token (logowanie społecznościowe)\n    try {\n        const nextAuthToken = await (0,next_auth_jwt__WEBPACK_IMPORTED_MODULE_2__.getToken)({\n            req,\n            secret: process.env.NEXTAUTH_SECRET\n        });\n        if (nextAuthToken && nextAuthToken.email) {\n            console.log(\"✅ auth.ts - NextAuth token znaleziony:\", nextAuthToken.email);\n            // Pobierz ID użytkownika z bazy danych\n            let user = await _prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].user.findUnique({\n                where: {\n                    email: nextAuthToken.email\n                },\n                select: {\n                    id: true,\n                    email: true\n                }\n            });\n            // Jeśli użytkownik NextAuth nie istnieje w bazie, utwórz go\n            if (!user) {\n                console.log(\"\\uD83D\\uDD27 auth.ts - Creating NextAuth user in database:\", nextAuthToken.email);\n                try {\n                    user = await _prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].user.create({\n                        data: {\n                            email: nextAuthToken.email,\n                            name: nextAuthToken.name || null,\n                            image: nextAuthToken.picture || null,\n                            confirmed: true,\n                            subscriptionType: null,\n                            subscriptionStart: null,\n                            subscriptionEnd: null,\n                            promotionsUsed: 0,\n                            promotionsLimit: 0\n                        },\n                        select: {\n                            id: true,\n                            email: true\n                        }\n                    });\n                    console.log(\"✅ auth.ts - NextAuth user created:\", user.email);\n                } catch (error) {\n                    console.error(\"❌ auth.ts - Failed to create NextAuth user:\", error);\n                    return null;\n                }\n            }\n            return {\n                id: user.id,\n                email: user.email\n            };\n        }\n    } catch (error) {\n        console.log(\"⚠️ auth.ts - błąd NextAuth token:\", error.message);\n    }\n    // Jeśli nie ma NextAuth token, sprawdź własny JWT token\n    const cookies = (0,cookie__WEBPACK_IMPORTED_MODULE_0__.parse)(req.headers.cookie || \"\");\n    console.log(\"\\uD83D\\uDD0D auth.ts - dostępne cookies:\", Object.keys(cookies));\n    console.log(\"\\uD83D\\uDD0D auth.ts - token cookie:\", !!cookies.token);\n    if (!cookies.token) {\n        console.log(\"❌ auth.ts - brak token\\xf3w\");\n        return null;\n    }\n    try {\n        const decoded = (0,_jwt__WEBPACK_IMPORTED_MODULE_1__.verifyToken)(cookies.token);\n        console.log(\"✅ auth.ts - JWT token zweryfikowany:\", decoded.email);\n        return decoded;\n    } catch (error) {\n        console.log(\"❌ auth.ts - błąd weryfikacji JWT tokenu:\", error.message);\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsY0FBYztBQUVnQjtBQUNLLENBQUcsMkJBQTJCO0FBQ3pCO0FBQ1g7QUFFdEIsZUFBZUksbUJBQW1CQyxHQUFtQjtJQUMxRCxxREFBcUQ7SUFDckQsSUFBSTtRQUNGLE1BQU1DLGdCQUFnQixNQUFNSix1REFBUUEsQ0FBQztZQUNuQ0c7WUFDQUUsUUFBUUMsUUFBUUMsR0FBRyxDQUFDQyxlQUFlO1FBQ3JDO1FBQ0EsSUFBSUosaUJBQWlCQSxjQUFjSyxLQUFLLEVBQUU7WUFDeENDLFFBQVFDLEdBQUcsQ0FBQywwQ0FBMENQLGNBQWNLLEtBQUs7WUFFekUsdUNBQXVDO1lBQ3ZDLElBQUlHLE9BQU8sTUFBTVgsb0RBQVcsQ0FBQ1ksVUFBVSxDQUFDO2dCQUN0Q0MsT0FBTztvQkFBRUwsT0FBT0wsY0FBY0ssS0FBSztnQkFBQztnQkFDcENNLFFBQVE7b0JBQUVDLElBQUk7b0JBQU1QLE9BQU87Z0JBQUs7WUFDbEM7WUFFQSw0REFBNEQ7WUFDNUQsSUFBSSxDQUFDRyxNQUFNO2dCQUNURixRQUFRQyxHQUFHLENBQUMsOERBQW9EUCxjQUFjSyxLQUFLO2dCQUNuRixJQUFJO29CQUNGRyxPQUFPLE1BQU1YLG9EQUFXLENBQUNnQixNQUFNLENBQUM7d0JBQzlCQyxNQUFNOzRCQUNKVCxPQUFPTCxjQUFjSyxLQUFLOzRCQUMxQlUsTUFBTWYsY0FBY2UsSUFBSSxJQUFJOzRCQUM1QkMsT0FBT2hCLGNBQWNpQixPQUFPLElBQUk7NEJBQ2hDQyxXQUFXOzRCQUNYQyxrQkFBa0I7NEJBQ2xCQyxtQkFBbUI7NEJBQ25CQyxpQkFBaUI7NEJBQ2pCQyxnQkFBZ0I7NEJBQ2hCQyxpQkFBaUI7d0JBQ25CO3dCQUNBWixRQUFROzRCQUFFQyxJQUFJOzRCQUFNUCxPQUFPO3dCQUFLO29CQUNsQztvQkFDQUMsUUFBUUMsR0FBRyxDQUFDLHNDQUFzQ0MsS0FBS0gsS0FBSztnQkFDOUQsRUFBRSxPQUFPbUIsT0FBTztvQkFDZGxCLFFBQVFrQixLQUFLLENBQUMsK0NBQStDQTtvQkFDN0QsT0FBTztnQkFDVDtZQUNGO1lBRUEsT0FBTztnQkFDTFosSUFBSUosS0FBS0ksRUFBRTtnQkFDWFAsT0FBT0csS0FBS0gsS0FBSztZQUNuQjtRQUNGO0lBQ0YsRUFBRSxPQUFPbUIsT0FBTztRQUNkbEIsUUFBUUMsR0FBRyxDQUFDLHFDQUFxQyxNQUFpQmtCLE9BQU87SUFDM0U7SUFFQSx3REFBd0Q7SUFDeEQsTUFBTUMsVUFBVWhDLDZDQUFLQSxDQUFDSyxJQUFJNEIsT0FBTyxDQUFDQyxNQUFNLElBQUk7SUFDNUN0QixRQUFRQyxHQUFHLENBQUMsNENBQWtDc0IsT0FBT0MsSUFBSSxDQUFDSjtJQUMxRHBCLFFBQVFDLEdBQUcsQ0FBQyx3Q0FBOEIsQ0FBQyxDQUFDbUIsUUFBUUssS0FBSztJQUV6RCxJQUFJLENBQUNMLFFBQVFLLEtBQUssRUFBRTtRQUNsQnpCLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE9BQU87SUFDVDtJQUVBLElBQUk7UUFDRixNQUFNeUIsVUFBVXJDLGlEQUFXQSxDQUFDK0IsUUFBUUssS0FBSztRQUN6Q3pCLFFBQVFDLEdBQUcsQ0FBQyx3Q0FBd0N5QixRQUFRM0IsS0FBSztRQUNqRSxPQUFPMkI7SUFDVCxFQUFFLE9BQU9SLE9BQU87UUFDZGxCLFFBQVFDLEdBQUcsQ0FBQyw0Q0FBNEMsTUFBaUJrQixPQUFPO1FBQ2hGLE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL2F1dGgudHM/YmY3ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBsaWIvYXV0aC50c1xuaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCB9IGZyb20gJ25leHQnXG5pbXBvcnQgeyBwYXJzZSB9IGZyb20gJ2Nvb2tpZSdcbmltcG9ydCB7IHZlcmlmeVRva2VuIH0gZnJvbSAnLi9qd3QnICAgLy8geW91ciBleGlzdGluZyBKV1QgaGVscGVyXG5pbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ25leHQtYXV0aC9qd3QnXG5pbXBvcnQgcHJpc21hIGZyb20gJy4vcHJpc21hJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckZyb21SZXF1ZXN0KHJlcTogTmV4dEFwaVJlcXVlc3QpIHtcbiAgLy8gU3ByYXdkxbogTmV4dEF1dGggdG9rZW4gKGxvZ293YW5pZSBzcG/FgmVjem5vxZtjaW93ZSlcbiAgdHJ5IHtcbiAgICBjb25zdCBuZXh0QXV0aFRva2VuID0gYXdhaXQgZ2V0VG9rZW4oeyBcbiAgICAgIHJlcSxcbiAgICAgIHNlY3JldDogcHJvY2Vzcy5lbnYuTkVYVEFVVEhfU0VDUkVUIFxuICAgIH0pXG4gICAgaWYgKG5leHRBdXRoVG9rZW4gJiYgbmV4dEF1dGhUb2tlbi5lbWFpbCkge1xuICAgICAgY29uc29sZS5sb2coJ+KchSBhdXRoLnRzIC0gTmV4dEF1dGggdG9rZW4gem5hbGV6aW9ueTonLCBuZXh0QXV0aFRva2VuLmVtYWlsKVxuICAgICAgXG4gICAgICAvLyBQb2JpZXJ6IElEIHXFvHl0a293bmlrYSB6IGJhenkgZGFueWNoXG4gICAgICBsZXQgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBlbWFpbDogbmV4dEF1dGhUb2tlbi5lbWFpbCB9LFxuICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIGVtYWlsOiB0cnVlIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIEplxZtsaSB1xbx5dGtvd25payBOZXh0QXV0aCBuaWUgaXN0bmllamUgdyBiYXppZSwgdXR3w7NyeiBnb1xuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SnIGF1dGgudHMgLSBDcmVhdGluZyBOZXh0QXV0aCB1c2VyIGluIGRhdGFiYXNlOicsIG5leHRBdXRoVG9rZW4uZW1haWwpXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIGVtYWlsOiBuZXh0QXV0aFRva2VuLmVtYWlsISxcbiAgICAgICAgICAgICAgbmFtZTogbmV4dEF1dGhUb2tlbi5uYW1lIHx8IG51bGwsXG4gICAgICAgICAgICAgIGltYWdlOiBuZXh0QXV0aFRva2VuLnBpY3R1cmUgfHwgbnVsbCxcbiAgICAgICAgICAgICAgY29uZmlybWVkOiB0cnVlLCAvLyBOZXh0QXV0aCB1xbx5dGtvd25pY3kgc8SFIGF1dG9tYXR5Y3puaWUgcG90d2llcmR6ZW5pXG4gICAgICAgICAgICAgIHN1YnNjcmlwdGlvblR5cGU6IG51bGwsXG4gICAgICAgICAgICAgIHN1YnNjcmlwdGlvblN0YXJ0OiBudWxsLFxuICAgICAgICAgICAgICBzdWJzY3JpcHRpb25FbmQ6IG51bGwsXG4gICAgICAgICAgICAgIHByb21vdGlvbnNVc2VkOiAwLFxuICAgICAgICAgICAgICBwcm9tb3Rpb25zTGltaXQ6IDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIGVtYWlsOiB0cnVlIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgYXV0aC50cyAtIE5leHRBdXRoIHVzZXIgY3JlYXRlZDonLCB1c2VyLmVtYWlsKVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBhdXRoLnRzIC0gRmFpbGVkIHRvIGNyZWF0ZSBOZXh0QXV0aCB1c2VyOicsIGVycm9yKVxuICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsXG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKCfimqDvuI8gYXV0aC50cyAtIGLFgsSFZCBOZXh0QXV0aCB0b2tlbjonLCAoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UpXG4gIH1cblxuICAvLyBKZcWbbGkgbmllIG1hIE5leHRBdXRoIHRva2VuLCBzcHJhd2TFuiB3xYJhc255IEpXVCB0b2tlblxuICBjb25zdCBjb29raWVzID0gcGFyc2UocmVxLmhlYWRlcnMuY29va2llIHx8ICcnKVxuICBjb25zb2xlLmxvZygn8J+UjSBhdXRoLnRzIC0gZG9zdMSZcG5lIGNvb2tpZXM6JywgT2JqZWN0LmtleXMoY29va2llcykpXG4gIGNvbnNvbGUubG9nKCfwn5SNIGF1dGgudHMgLSB0b2tlbiBjb29raWU6JywgISFjb29raWVzLnRva2VuKVxuICBcbiAgaWYgKCFjb29raWVzLnRva2VuKSB7XG4gICAgY29uc29sZS5sb2coJ+KdjCBhdXRoLnRzIC0gYnJhayB0b2tlbsOzdycpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgZGVjb2RlZCA9IHZlcmlmeVRva2VuKGNvb2tpZXMudG9rZW4pIGFzIHsgaWQ6IG51bWJlcjsgZW1haWw6IHN0cmluZyB9XG4gICAgY29uc29sZS5sb2coJ+KchSBhdXRoLnRzIC0gSldUIHRva2VuIHp3ZXJ5Zmlrb3dhbnk6JywgZGVjb2RlZC5lbWFpbClcbiAgICByZXR1cm4gZGVjb2RlZFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKCfinYwgYXV0aC50cyAtIGLFgsSFZCB3ZXJ5ZmlrYWNqaSBKV1QgdG9rZW51OicsIChlcnJvciBhcyBFcnJvcikubWVzc2FnZSlcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG4iXSwibmFtZXMiOlsicGFyc2UiLCJ2ZXJpZnlUb2tlbiIsImdldFRva2VuIiwicHJpc21hIiwiZ2V0VXNlckZyb21SZXF1ZXN0IiwicmVxIiwibmV4dEF1dGhUb2tlbiIsInNlY3JldCIsInByb2Nlc3MiLCJlbnYiLCJORVhUQVVUSF9TRUNSRVQiLCJlbWFpbCIsImNvbnNvbGUiLCJsb2ciLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwic2VsZWN0IiwiaWQiLCJjcmVhdGUiLCJkYXRhIiwibmFtZSIsImltYWdlIiwicGljdHVyZSIsImNvbmZpcm1lZCIsInN1YnNjcmlwdGlvblR5cGUiLCJzdWJzY3JpcHRpb25TdGFydCIsInN1YnNjcmlwdGlvbkVuZCIsInByb21vdGlvbnNVc2VkIiwicHJvbW90aW9uc0xpbWl0IiwiZXJyb3IiLCJtZXNzYWdlIiwiY29va2llcyIsImhlYWRlcnMiLCJjb29raWUiLCJPYmplY3QiLCJrZXlzIiwidG9rZW4iLCJkZWNvZGVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/auth.ts\n");

/***/ }),

/***/ "(api)/./lib/jwt.ts":
/*!********************!*\
  !*** ./lib/jwt.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signToken: () => (/* binding */ signToken),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n\nconst JWT_SECRET = process.env.JWT_SECRET;\nif (!JWT_SECRET) throw new Error(\"JWT_SECRET is missing in environment variables\");\nfunction signToken(payload, expiresIn = \"7d\") {\n    const options = {\n        expiresIn: String(expiresIn)\n    };\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign(payload, JWT_SECRET, options);\n}\nfunction verifyToken(token) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, JWT_SECRET);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvand0LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBOEI7QUFFOUIsTUFBTUMsYUFBYUMsUUFBUUMsR0FBRyxDQUFDRixVQUFVO0FBQ3pDLElBQUksQ0FBQ0EsWUFBWSxNQUFNLElBQUlHLE1BQU07QUFFMUIsU0FBU0MsVUFBVUMsT0FBNEIsRUFBRUMsWUFBNkIsSUFBSTtJQUN2RixNQUFNQyxVQUFlO1FBQUVELFdBQVdFLE9BQU9GO0lBQVc7SUFDcEQsT0FBT1Asd0RBQVEsQ0FBQ00sU0FBU0wsWUFBc0JPO0FBQ2pEO0FBRU8sU0FBU0csWUFBWUMsS0FBYTtJQUN2QyxPQUFPWiwwREFBVSxDQUFDWSxPQUFPWDtBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9qd3QudHM/ZWEyMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbidcblxuY29uc3QgSldUX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVRcbmlmICghSldUX1NFQ1JFVCkgdGhyb3cgbmV3IEVycm9yKCdKV1RfU0VDUkVUIGlzIG1pc3NpbmcgaW4gZW52aXJvbm1lbnQgdmFyaWFibGVzJylcblxuZXhwb3J0IGZ1bmN0aW9uIHNpZ25Ub2tlbihwYXlsb2FkOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBleHBpcmVzSW46IHN0cmluZyB8IG51bWJlciA9ICc3ZCcpIHtcbiAgY29uc3Qgb3B0aW9uczogYW55ID0geyBleHBpcmVzSW46IFN0cmluZyhleHBpcmVzSW4pIH1cbiAgcmV0dXJuIGp3dC5zaWduKHBheWxvYWQsIEpXVF9TRUNSRVQgYXMgc3RyaW5nLCBvcHRpb25zKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdmVyaWZ5VG9rZW4odG9rZW46IHN0cmluZykge1xuICByZXR1cm4gand0LnZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVCBhcyBzdHJpbmcpXG59Il0sIm5hbWVzIjpbImp3dCIsIkpXVF9TRUNSRVQiLCJwcm9jZXNzIiwiZW52IiwiRXJyb3IiLCJzaWduVG9rZW4iLCJwYXlsb2FkIiwiZXhwaXJlc0luIiwib3B0aW9ucyIsIlN0cmluZyIsInNpZ24iLCJ2ZXJpZnlUb2tlbiIsInRva2VuIiwidmVyaWZ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/jwt.ts\n");

/***/ }),

/***/ "(api)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQUU3QyxNQUFNQyxTQUFTLElBQUlELHdEQUFZQTtBQUMvQixpRUFBZUMsTUFBTUEsRUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9wcmlzbWEudHM/OTgyMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcblxuY29uc3QgcHJpc21hID0gbmV3IFByaXNtYUNsaWVudCgpXG5leHBvcnQgZGVmYXVsdCBwcmlzbWFcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJwcmlzbWEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/prisma.ts\n");

/***/ }),

/***/ "(api)/./pages/api/subscriptions/status.ts":
/*!*******************************************!*\
  !*** ./pages/api/subscriptions/status.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/jwt */ \"next-auth/jwt\");\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_jwt__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/auth */ \"(api)/./lib/auth.ts\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/prisma */ \"(api)/./lib/prisma.ts\");\n// pages/api/subscriptions/status.ts\n\n\n\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        let userInfo = null;\n        // Sprawdź NextAuth token (logowanie społecznościowe)\n        const nextAuthToken = await (0,next_auth_jwt__WEBPACK_IMPORTED_MODULE_0__.getToken)({\n            req,\n            secret: process.env.NEXTAUTH_SECRET\n        });\n        if (nextAuthToken && nextAuthToken.email) {\n            userInfo = {\n                email: nextAuthToken.email\n            };\n        }\n        // Jeśli nie ma NextAuth token, sprawdź własny JWT token (logowanie email/hasło)\n        if (!userInfo) {\n            const jwtUser = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.getUserFromRequest)(req);\n            if (jwtUser) {\n                userInfo = jwtUser;\n            }\n        }\n        if (!userInfo) {\n            return res.status(401).json({\n                error: \"Not authenticated\"\n            });\n        }\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.findUnique({\n            where: {\n                email: userInfo.email\n            },\n            include: {\n                subscriptions: {\n                    where: {\n                        OR: [\n                            {\n                                status: \"ACTIVE\"\n                            },\n                            {\n                                status: \"CANCELLED\"\n                            }\n                        ]\n                    },\n                    orderBy: {\n                        createdAt: \"desc\"\n                    },\n                    take: 1\n                }\n            }\n        });\n        if (!user) {\n            return res.status(404).json({\n                error: \"User not found\"\n            });\n        }\n        const now = new Date();\n        const hasActiveSubscription = user.subscriptionEnd && user.subscriptionEnd > now;\n        const activeSubscription = user.subscriptions[0] // Najpewniej najnowsza subskrypcja\n        ;\n        const isCancelled = activeSubscription?.status === \"CANCELLED\" && hasActiveSubscription;\n        // Oblicz limit promocji na podstawie typu subskrypcji\n        let promotionsLimit = 0;\n        if (hasActiveSubscription && user.subscriptionType) {\n            switch(user.subscriptionType){\n                case \"PRO\":\n                    promotionsLimit = 1 // 1 promocja miesięcznie dla PRO\n                    ;\n                    break;\n                case \"PRO_PLUS\":\n                    promotionsLimit = 3 // 3 promocje miesięcznie dla PRO+\n                    ;\n                    break;\n                default:\n                    promotionsLimit = 0;\n            }\n        }\n        // Debug logging\n        console.log(\"\\uD83D\\uDD0D Subscription status check:\", {\n            userId: user.id,\n            email: user.email,\n            subscriptionType: user.subscriptionType,\n            promotionsUsed: user.promotionsUsed,\n            promotionsLimit: promotionsLimit,\n            hasActiveSubscription,\n            subscriptionEnd: user.subscriptionEnd\n        });\n        res.status(200).json({\n            success: true,\n            subscription: {\n                isActive: hasActiveSubscription,\n                isCancelled: isCancelled,\n                type: user.subscriptionType,\n                startDate: user.subscriptionStart,\n                endDate: user.subscriptionEnd,\n                promotionsUsed: user.promotionsUsed,\n                promotionsLimit: promotionsLimit,\n                emailReminder: user.emailReminder,\n                autoRenew: activeSubscription ? activeSubscription.autoRenew : false,\n                daysRemaining: hasActiveSubscription ? Math.ceil((user.subscriptionEnd.getTime() - now.getTime()) / (1000 * 60 * 60 * 24)) : 0\n            }\n        });\n    } catch (error) {\n        console.error(\"Get subscription status error:\", error);\n        res.status(500).json({\n            error: \"Internal server error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvc3Vic2NyaXB0aW9ucy9zdGF0dXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxvQ0FBb0M7QUFFSTtBQUNjO0FBQ2Q7QUFFekIsZUFBZUcsUUFBUUMsR0FBbUIsRUFBRUMsR0FBb0I7SUFDN0UsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLE9BQU87UUFDeEIsT0FBT0QsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQXFCO0lBQzVEO0lBRUEsSUFBSTtRQUNGLElBQUlDLFdBQVc7UUFFZixxREFBcUQ7UUFDckQsTUFBTUMsZ0JBQWdCLE1BQU1YLHVEQUFRQSxDQUFDO1lBQ25DSTtZQUNBUSxRQUFRQyxRQUFRQyxHQUFHLENBQUNDLGVBQWU7UUFDckM7UUFDQSxJQUFJSixpQkFBaUJBLGNBQWNLLEtBQUssRUFBRTtZQUN4Q04sV0FBVztnQkFBRU0sT0FBT0wsY0FBY0ssS0FBSztZQUFDO1FBQzFDO1FBRUEsZ0ZBQWdGO1FBQ2hGLElBQUksQ0FBQ04sVUFBVTtZQUNiLE1BQU1PLFVBQVUsTUFBTWhCLDZEQUFrQkEsQ0FBQ0c7WUFDekMsSUFBSWEsU0FBUztnQkFDWFAsV0FBV087WUFDYjtRQUNGO1FBRUEsSUFBSSxDQUFDUCxVQUFVO1lBQ2IsT0FBT0wsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFvQjtRQUMzRDtRQUVBLE1BQU1TLE9BQU8sTUFBTWhCLHdEQUFXLENBQUNpQixVQUFVLENBQUM7WUFDeENDLE9BQU87Z0JBQUVKLE9BQU9OLFNBQVNNLEtBQUs7WUFBQztZQUMvQkssU0FBUztnQkFDUEMsZUFBZTtvQkFDYkYsT0FBTzt3QkFDTEcsSUFBSTs0QkFDRjtnQ0FBRWhCLFFBQVE7NEJBQVM7NEJBQ25CO2dDQUFFQSxRQUFROzRCQUFZO3lCQUN2QjtvQkFDSDtvQkFDQWlCLFNBQVM7d0JBQUVDLFdBQVc7b0JBQU87b0JBQzdCQyxNQUFNO2dCQUNSO1lBQ0Y7UUFDRjtRQUVBLElBQUksQ0FBQ1IsTUFBTTtZQUNULE9BQU9iLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBaUI7UUFDeEQ7UUFFQSxNQUFNa0IsTUFBTSxJQUFJQztRQUNoQixNQUFNQyx3QkFBd0JYLEtBQUtZLGVBQWUsSUFBSVosS0FBS1ksZUFBZSxHQUFHSDtRQUM3RSxNQUFNSSxxQkFBcUJiLEtBQUtJLGFBQWEsQ0FBQyxFQUFFLENBQUMsbUNBQW1DOztRQUNwRixNQUFNVSxjQUFjRCxvQkFBb0J4QixXQUFXLGVBQWVzQjtRQUVsRSxzREFBc0Q7UUFDdEQsSUFBSUksa0JBQWtCO1FBQ3RCLElBQUlKLHlCQUF5QlgsS0FBS2dCLGdCQUFnQixFQUFFO1lBQ2xELE9BQVFoQixLQUFLZ0IsZ0JBQWdCO2dCQUMzQixLQUFLO29CQUNIRCxrQkFBa0IsRUFBRSxpQ0FBaUM7O29CQUNyRDtnQkFDRixLQUFLO29CQUNIQSxrQkFBa0IsRUFBRSxrQ0FBa0M7O29CQUN0RDtnQkFDRjtvQkFDRUEsa0JBQWtCO1lBQ3RCO1FBQ0Y7UUFFQSxnQkFBZ0I7UUFDaEJFLFFBQVFDLEdBQUcsQ0FBQywyQ0FBaUM7WUFDM0NDLFFBQVFuQixLQUFLb0IsRUFBRTtZQUNmdEIsT0FBT0UsS0FBS0YsS0FBSztZQUNqQmtCLGtCQUFrQmhCLEtBQUtnQixnQkFBZ0I7WUFDdkNLLGdCQUFnQnJCLEtBQUtxQixjQUFjO1lBQ25DTixpQkFBaUJBO1lBQ2pCSjtZQUNBQyxpQkFBaUJaLEtBQUtZLGVBQWU7UUFDdkM7UUFFQXpCLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDbkJnQyxTQUFTO1lBQ1RDLGNBQWM7Z0JBQ1pDLFVBQVViO2dCQUNWRyxhQUFhQTtnQkFDYlcsTUFBTXpCLEtBQUtnQixnQkFBZ0I7Z0JBQzNCVSxXQUFXMUIsS0FBSzJCLGlCQUFpQjtnQkFDakNDLFNBQVM1QixLQUFLWSxlQUFlO2dCQUM3QlMsZ0JBQWdCckIsS0FBS3FCLGNBQWM7Z0JBQ25DTixpQkFBaUJBO2dCQUNqQmMsZUFBZTdCLEtBQUs2QixhQUFhO2dCQUNqQ0MsV0FBV2pCLHFCQUFxQkEsbUJBQW1CaUIsU0FBUyxHQUFHO2dCQUMvREMsZUFBZXBCLHdCQUF3QnFCLEtBQUtDLElBQUksQ0FBQyxDQUFDakMsS0FBS1ksZUFBZSxDQUFFc0IsT0FBTyxLQUFLekIsSUFBSXlCLE9BQU8sRUFBQyxJQUFNLFFBQU8sS0FBSyxLQUFLLEVBQUMsS0FBTTtZQUNoSTtRQUNGO0lBRUYsRUFBRSxPQUFPM0MsT0FBTztRQUNkMEIsUUFBUTFCLEtBQUssQ0FBQyxrQ0FBa0NBO1FBQ2hESixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBd0I7SUFDeEQ7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3BhZ2VzL2FwaS9zdWJzY3JpcHRpb25zL3N0YXR1cy50cz9jODM2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHBhZ2VzL2FwaS9zdWJzY3JpcHRpb25zL3N0YXR1cy50c1xuaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnXG5pbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ25leHQtYXV0aC9qd3QnXG5pbXBvcnQgeyBnZXRVc2VyRnJvbVJlcXVlc3QgfSBmcm9tICcuLi8uLi8uLi9saWIvYXV0aCdcbmltcG9ydCBwcmlzbWEgZnJvbSAnLi4vLi4vLi4vbGliL3ByaXNtYSdcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICBpZiAocmVxLm1ldGhvZCAhPT0gJ0dFVCcpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSlcbiAgfVxuXG4gIHRyeSB7XG4gICAgbGV0IHVzZXJJbmZvID0gbnVsbFxuXG4gICAgLy8gU3ByYXdkxbogTmV4dEF1dGggdG9rZW4gKGxvZ293YW5pZSBzcG/FgmVjem5vxZtjaW93ZSlcbiAgICBjb25zdCBuZXh0QXV0aFRva2VuID0gYXdhaXQgZ2V0VG9rZW4oeyBcbiAgICAgIHJlcSxcbiAgICAgIHNlY3JldDogcHJvY2Vzcy5lbnYuTkVYVEFVVEhfU0VDUkVUIFxuICAgIH0pXG4gICAgaWYgKG5leHRBdXRoVG9rZW4gJiYgbmV4dEF1dGhUb2tlbi5lbWFpbCkge1xuICAgICAgdXNlckluZm8gPSB7IGVtYWlsOiBuZXh0QXV0aFRva2VuLmVtYWlsIH1cbiAgICB9XG5cbiAgICAvLyBKZcWbbGkgbmllIG1hIE5leHRBdXRoIHRva2VuLCBzcHJhd2TFuiB3xYJhc255IEpXVCB0b2tlbiAobG9nb3dhbmllIGVtYWlsL2hhc8WCbylcbiAgICBpZiAoIXVzZXJJbmZvKSB7XG4gICAgICBjb25zdCBqd3RVc2VyID0gYXdhaXQgZ2V0VXNlckZyb21SZXF1ZXN0KHJlcSlcbiAgICAgIGlmIChqd3RVc2VyKSB7XG4gICAgICAgIHVzZXJJbmZvID0gand0VXNlclxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghdXNlckluZm8pIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnTm90IGF1dGhlbnRpY2F0ZWQnIH0pXG4gICAgfVxuXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgZW1haWw6IHVzZXJJbmZvLmVtYWlsIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIHN1YnNjcmlwdGlvbnM6IHtcbiAgICAgICAgICB3aGVyZTogeyBcbiAgICAgICAgICAgIE9SOiBbXG4gICAgICAgICAgICAgIHsgc3RhdHVzOiAnQUNUSVZFJyB9LFxuICAgICAgICAgICAgICB7IHN0YXR1czogJ0NBTkNFTExFRCcgfVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH0sXG4gICAgICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgICAgIHRha2U6IDFcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnVXNlciBub3QgZm91bmQnIH0pXG4gICAgfVxuXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKVxuICAgIGNvbnN0IGhhc0FjdGl2ZVN1YnNjcmlwdGlvbiA9IHVzZXIuc3Vic2NyaXB0aW9uRW5kICYmIHVzZXIuc3Vic2NyaXB0aW9uRW5kID4gbm93XG4gICAgY29uc3QgYWN0aXZlU3Vic2NyaXB0aW9uID0gdXNlci5zdWJzY3JpcHRpb25zWzBdIC8vIE5hanBld25pZWogbmFqbm93c3phIHN1YnNrcnlwY2phXG4gICAgY29uc3QgaXNDYW5jZWxsZWQgPSBhY3RpdmVTdWJzY3JpcHRpb24/LnN0YXR1cyA9PT0gJ0NBTkNFTExFRCcgJiYgaGFzQWN0aXZlU3Vic2NyaXB0aW9uXG4gICAgXG4gICAgLy8gT2JsaWN6IGxpbWl0IHByb21vY2ppIG5hIHBvZHN0YXdpZSB0eXB1IHN1YnNrcnlwY2ppXG4gICAgbGV0IHByb21vdGlvbnNMaW1pdCA9IDBcbiAgICBpZiAoaGFzQWN0aXZlU3Vic2NyaXB0aW9uICYmIHVzZXIuc3Vic2NyaXB0aW9uVHlwZSkge1xuICAgICAgc3dpdGNoICh1c2VyLnN1YnNjcmlwdGlvblR5cGUpIHtcbiAgICAgICAgY2FzZSAnUFJPJzpcbiAgICAgICAgICBwcm9tb3Rpb25zTGltaXQgPSAxIC8vIDEgcHJvbW9jamEgbWllc2nEmWN6bmllIGRsYSBQUk9cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdQUk9fUExVUyc6XG4gICAgICAgICAgcHJvbW90aW9uc0xpbWl0ID0gMyAvLyAzIHByb21vY2plIG1pZXNpxJljem5pZSBkbGEgUFJPK1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcHJvbW90aW9uc0xpbWl0ID0gMFxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBEZWJ1ZyBsb2dnaW5nXG4gICAgY29uc29sZS5sb2coJ/CflI0gU3Vic2NyaXB0aW9uIHN0YXR1cyBjaGVjazonLCB7XG4gICAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgIHN1YnNjcmlwdGlvblR5cGU6IHVzZXIuc3Vic2NyaXB0aW9uVHlwZSxcbiAgICAgIHByb21vdGlvbnNVc2VkOiB1c2VyLnByb21vdGlvbnNVc2VkLFxuICAgICAgcHJvbW90aW9uc0xpbWl0OiBwcm9tb3Rpb25zTGltaXQsXG4gICAgICBoYXNBY3RpdmVTdWJzY3JpcHRpb24sXG4gICAgICBzdWJzY3JpcHRpb25FbmQ6IHVzZXIuc3Vic2NyaXB0aW9uRW5kXG4gICAgfSlcbiAgICBcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgc3Vic2NyaXB0aW9uOiB7XG4gICAgICAgIGlzQWN0aXZlOiBoYXNBY3RpdmVTdWJzY3JpcHRpb24sXG4gICAgICAgIGlzQ2FuY2VsbGVkOiBpc0NhbmNlbGxlZCxcbiAgICAgICAgdHlwZTogdXNlci5zdWJzY3JpcHRpb25UeXBlLFxuICAgICAgICBzdGFydERhdGU6IHVzZXIuc3Vic2NyaXB0aW9uU3RhcnQsXG4gICAgICAgIGVuZERhdGU6IHVzZXIuc3Vic2NyaXB0aW9uRW5kLFxuICAgICAgICBwcm9tb3Rpb25zVXNlZDogdXNlci5wcm9tb3Rpb25zVXNlZCxcbiAgICAgICAgcHJvbW90aW9uc0xpbWl0OiBwcm9tb3Rpb25zTGltaXQsXG4gICAgICAgIGVtYWlsUmVtaW5kZXI6IHVzZXIuZW1haWxSZW1pbmRlcixcbiAgICAgICAgYXV0b1JlbmV3OiBhY3RpdmVTdWJzY3JpcHRpb24gPyBhY3RpdmVTdWJzY3JpcHRpb24uYXV0b1JlbmV3IDogZmFsc2UsXG4gICAgICAgIGRheXNSZW1haW5pbmc6IGhhc0FjdGl2ZVN1YnNjcmlwdGlvbiA/IE1hdGguY2VpbCgodXNlci5zdWJzY3JpcHRpb25FbmQhLmdldFRpbWUoKSAtIG5vdy5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKSA6IDBcbiAgICAgIH1cbiAgICB9KVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignR2V0IHN1YnNjcmlwdGlvbiBzdGF0dXMgZXJyb3I6JywgZXJyb3IpXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSlcbiAgfVxufVxuIl0sIm5hbWVzIjpbImdldFRva2VuIiwiZ2V0VXNlckZyb21SZXF1ZXN0IiwicHJpc21hIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInVzZXJJbmZvIiwibmV4dEF1dGhUb2tlbiIsInNlY3JldCIsInByb2Nlc3MiLCJlbnYiLCJORVhUQVVUSF9TRUNSRVQiLCJlbWFpbCIsImp3dFVzZXIiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaW5jbHVkZSIsInN1YnNjcmlwdGlvbnMiLCJPUiIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiLCJ0YWtlIiwibm93IiwiRGF0ZSIsImhhc0FjdGl2ZVN1YnNjcmlwdGlvbiIsInN1YnNjcmlwdGlvbkVuZCIsImFjdGl2ZVN1YnNjcmlwdGlvbiIsImlzQ2FuY2VsbGVkIiwicHJvbW90aW9uc0xpbWl0Iiwic3Vic2NyaXB0aW9uVHlwZSIsImNvbnNvbGUiLCJsb2ciLCJ1c2VySWQiLCJpZCIsInByb21vdGlvbnNVc2VkIiwic3VjY2VzcyIsInN1YnNjcmlwdGlvbiIsImlzQWN0aXZlIiwidHlwZSIsInN0YXJ0RGF0ZSIsInN1YnNjcmlwdGlvblN0YXJ0IiwiZW5kRGF0ZSIsImVtYWlsUmVtaW5kZXIiLCJhdXRvUmVuZXciLCJkYXlzUmVtYWluaW5nIiwiTWF0aCIsImNlaWwiLCJnZXRUaW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/subscriptions/status.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsubscriptions%2Fstatus&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsubscriptions%2Fstatus.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();