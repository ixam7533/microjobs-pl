(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2],{6190:function(e,o,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/add-new",function(){return t(6821)}])},6821:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return AddAdvertisementPage}});var n=t(5893),a=t(7294),i=t(1163),r=t(1664),s=t.n(r),l=t(1372),c=t(2645),d=t(794);function PublishButtonDirect(e){let{offerData:o,onSuccess:t}=e,i=(0,a.useRef)(null),r=(0,a.useRef)(!1);(0,a.useEffect)(()=>{r.current||(initializeShopifyButton(),r.current=!0);let e=setInterval(()=>{let e=localStorage.getItem("shopify_purchase_completed");"true"===e&&(localStorage.removeItem("shopify_purchase_completed"),console.log("Zakup Shopify ukończony - odświeżam stronę"),null==t||t())},2e3);return()=>clearInterval(e)},[t]);let initializeShopifyButton=()=>{(()=>{function ShopifyBuyInit(){let e=window.ShopifyBuy.buildClient({domain:"3cusn0-tb.myshopify.com",storefrontAccessToken:"1c310fecfc50cafd83aa554bc311b949"});window.ShopifyBuy.UI.onReady(e).then(e=>{e.createComponent("product",{id:"9714024743254",node:i.current,moneyFormat:"%7B%7Bamount_with_comma_separator%7D%7D%20z%C5%82",options:{product:{styles:{product:{"@media (min-width: 601px)":{"max-width":"calc(25% - 20px)","margin-left":"20px","margin-bottom":"50px"}},button:{"font-weight":"bold","font-size":"16px","padding-top":"16px","padding-bottom":"16px",color:"#ffffff !important",":hover":{"background-color":"#a150e0",color:"#ffffff !important"},"background-color":"#b359f9",":focus":{"background-color":"#a150e0",color:"#ffffff !important"},"border-radius":"10px","padding-left":"90px","padding-right":"90px"},quantityInput:{"font-size":"16px","padding-top":"16px","padding-bottom":"16px"}},contents:{img:!1,title:!1,price:!1},text:{button:"Publikuj za 6 zł"}},productSet:{styles:{products:{"@media (min-width: 601px)":{"margin-left":"-20px"}}}},modalProduct:{contents:{img:!1,imgWithCarousel:!0,button:!1,buttonWithQuantity:!0},styles:{product:{"@media (min-width: 601px)":{"max-width":"100%","margin-left":"0px","margin-bottom":"0px"}},button:{"font-weight":"bold","font-size":"16px","padding-top":"16px","padding-bottom":"16px",color:"#ffffff !important",":hover":{"background-color":"#a150e0",color:"#ffffff !important"},"background-color":"#b359f9",":focus":{"background-color":"#a150e0",color:"#ffffff !important"},"border-radius":"10px","padding-left":"90px","padding-right":"90px"},quantityInput:{"font-size":"16px","padding-top":"16px","padding-bottom":"16px"}},text:{button:"Add to cart"}},option:{},cart:{styles:{button:{"font-weight":"bold","font-size":"16px","padding-top":"16px","padding-bottom":"16px",color:"#ffffff !important",":hover":{"background-color":"#a150e0",color:"#ffffff !important"},"background-color":"#b359f9",":focus":{"background-color":"#a150e0",color:"#ffffff !important"},"border-radius":"10px"}},text:{total:"Subtotal",button:"Checkout"}},toggle:{styles:{toggle:{"font-weight":"bold","background-color":"#b359f9",":hover":{"background-color":"#a150e0"},":focus":{"background-color":"#a150e0"}},count:{"font-size":"16px"}}}}})})}window.ShopifyBuy&&window.ShopifyBuy.UI?ShopifyBuyInit():function(){let e=document.createElement("script");e.async=!0,e.src="https://sdks.shopifycdn.com/buy-button/latest/buy-button-storefront.min.js";let o=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0];o.appendChild(e),e.onload=ShopifyBuyInit}()})()};return(0,n.jsxs)("div",{style:{position:"relative"},children:[(0,n.jsx)("div",{ref:i}),!1]})}function PublishButtonFree(e){let{offerData:o,onPublishSuccess:t}=e,[i,r]=(0,a.useState)(!1),handleFreePublish=async()=>{r(!0);try{console.log("Publikuję darmowe ogłoszenie PRO/PRO+...",o);let e=await fetch("/api/offers/publish-free",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...o,paymentType:"free_pro",userEmail:o.contactEmail,userId:1})}),n=await e.json();if(n.success)console.log("Ogłoszenie opublikowane za darmo:",n.offerId),alert("✅ Ogłoszenie zostało opublikowane za darmo!"),null==t||t();else throw Error(n.error||"Błąd publikacji")}catch(e){console.error("Błąd publikacji:",e),alert("Błąd publikacji ogłoszenia. Spr\xf3buj ponownie.")}finally{r(!1)}};return(0,n.jsx)("button",{type:"button",onClick:handleFreePublish,disabled:i,style:{backgroundColor:"#4CAF50",color:"white",border:"none",padding:"16px 24px",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:i?"not-allowed":"pointer",width:"100%",opacity:i?.7:1},children:i?"\uD83D\uDD04 Publikuję...":"\uD83C\uDD93 Publikuj za darmo (PRO)"})}function PublishWithPromo1Direct(e){let{offerData:o,onSuccess:t}=e,i=(0,a.useRef)(null),r=(0,a.useRef)(!1);(0,a.useEffect)(()=>{r.current||(initializeShopifyButton(),r.current=!0);let e=setInterval(()=>{let e=localStorage.getItem("shopify_purchase_completed");"true"===e&&(localStorage.removeItem("shopify_purchase_completed"),console.log("Zakup Shopify z promocją ukończony - odświeżam stronę"),null==t||t())},2e3);return()=>clearInterval(e)},[t]);let initializeShopifyButton=()=>{(()=>{function ShopifyBuyInit(){let e=window.ShopifyBuy.buildClient({domain:"3cusn0-tb.myshopify.com",storefrontAccessToken:"1c310fecfc50cafd83aa554bc311b949"});window.ShopifyBuy.UI.onReady(e).then(e=>{e.createComponent("product",{id:"9714008555862",node:i.current,moneyFormat:"%7B%7Bamount_with_comma_separator%7D%7D%20z%C5%82",options:{product:{styles:{product:{"@media (min-width: 601px)":{"max-width":"calc(25% - 20px)","margin-left":"20px","margin-bottom":"50px"}},button:{"font-weight":"bold","font-size":"16px","padding-top":"16px","padding-bottom":"16px",color:"#ffffff !important",":hover":{"background-color":"#a150e0",color:"#ffffff !important"},"background-color":"#b359f9",":focus":{"background-color":"#a150e0",color:"#ffffff !important"},"border-radius":"10px","padding-left":"90px","padding-right":"90px"},quantityInput:{"font-size":"16px","padding-top":"16px","padding-bottom":"16px"}},buttonDestination:"checkout",contents:{img:!1,title:!1,price:!1},text:{button:"Zapisz i przejdź do płatności (10 zł)"}},productSet:{styles:{products:{"@media (min-width: 601px)":{"margin-left":"-20px"}}}},modalProduct:{contents:{img:!1,imgWithCarousel:!0,button:!1,buttonWithQuantity:!0},styles:{product:{"@media (min-width: 601px)":{"max-width":"100%","margin-left":"0px","margin-bottom":"0px"}},button:{"font-weight":"bold","font-size":"16px","padding-top":"16px","padding-bottom":"16px",color:"#ffffff !important",":hover":{"background-color":"#a150e0",color:"#ffffff !important"},"background-color":"#b359f9",":focus":{"background-color":"#a150e0",color:"#ffffff !important"},"border-radius":"10px","padding-left":"90px","padding-right":"90px"},quantityInput:{"font-size":"16px","padding-top":"16px","padding-bottom":"16px"}},text:{button:"Add to cart"}},option:{},cart:{styles:{button:{"font-weight":"bold","font-size":"16px","padding-top":"16px","padding-bottom":"16px",color:"#ffffff !important",":hover":{"background-color":"#a150e0",color:"#ffffff !important"},"background-color":"#b359f9",":focus":{"background-color":"#a150e0",color:"#ffffff !important"},"border-radius":"10px"}},text:{total:"Subtotal",button:"Checkout"}},toggle:{styles:{toggle:{"font-weight":"bold","background-color":"#b359f9",":hover":{"background-color":"#a150e0"},":focus":{"background-color":"#a150e0"}},count:{"font-size":"16px"}}}}})})}window.ShopifyBuy&&window.ShopifyBuy.UI?ShopifyBuyInit():function(){let e=document.createElement("script");e.async=!0,e.src="https://sdks.shopifycdn.com/buy-button/latest/buy-button-storefront.min.js";let o=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0];o.appendChild(e),e.onload=ShopifyBuyInit}()})()};return(0,n.jsxs)("div",{style:{position:"relative"},children:[(0,n.jsx)("div",{ref:i}),!1]})}function PublishWithPromoFree(e){let{offerData:o,onPublishSuccess:t}=e,[i,r]=(0,a.useState)(!1),handleFreePromoPublish=async()=>{r(!0);try{console.log("Publikuję darmowe ogłoszenie + promocja PRO+...",o);let e=await fetch("/api/offers/publish-free-promo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...o,paymentType:"free_promo_plus",wantPromo:!0,userEmail:o.contactEmail,userId:1})}),n=await e.json();if(n.success)console.log("Ogłoszenie + promocja opublikowane za darmo:",n.offerId),alert("✅ Ogłoszenie z promocją zostało opublikowane za darmo!"),null==t||t();else throw Error(n.error||"Błąd publikacji")}catch(e){console.error("Błąd publikacji:",e),alert("Błąd publikacji ogłoszenia. Spr\xf3buj ponownie.")}finally{r(!1)}};return(0,n.jsx)("button",{type:"button",onClick:handleFreePromoPublish,disabled:i,style:{backgroundColor:"#FF6B35",color:"white",border:"none",padding:"16px 24px",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:i?"not-allowed":"pointer",width:"100%",opacity:i?.7:1},children:i?"\uD83D\uDD04 Publikuję...":"\uD83C\uDFAF Publikuj + Promuj za darmo (PRO+)"})}function PublishWithPromo2(){let e=(0,a.useRef)(null),o=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{o.current||(()=>{function ShopifyBuyInit(){let e=window.ShopifyBuy.buildClient({domain:"3cusn0-tb.myshopify.com",storefrontAccessToken:"1c310fecfc50cafd83aa554bc311b949"});window.ShopifyBuy.UI.onReady(e).then(e=>{e.createComponent("product",{id:"9714001707350",node:document.getElementById("product-component-publish-promo-2"),moneyFormat:"%7B%7Bamount_with_comma_separator%7D%7D%20z%C5%82",options:{product:{styles:{product:{"@media (min-width: 601px)":{"max-width":"calc(25% - 20px)","margin-left":"20px","margin-bottom":"50px"}},button:{"font-weight":"bold","font-size":"16px","padding-top":"16px","padding-bottom":"16px",color:"#ffffff !important",":hover":{"background-color":"#a150e0",color:"#ffffff !important"},"background-color":"#b359f9",":focus":{"background-color":"#a150e0",color:"#ffffff !important"},"border-radius":"10px","padding-left":"90px","padding-right":"90px"},quantityInput:{"font-size":"16px","padding-top":"16px","padding-bottom":"16px"}},buttonDestination:"checkout",contents:{img:!1,title:!1,price:!1},text:{button:"Publikuj + Promuj za 16.99zł"}},productSet:{styles:{products:{"@media (min-width: 601px)":{"margin-left":"-20px"}}}},modalProduct:{contents:{img:!1,imgWithCarousel:!0,button:!1,buttonWithQuantity:!0},styles:{product:{"@media (min-width: 601px)":{"max-width":"100%","margin-left":"0px","margin-bottom":"0px"}},button:{"font-weight":"bold","font-size":"16px","padding-top":"16px","padding-bottom":"16px",":hover":{"background-color":"#a150e0"},"background-color":"#b359f9",":focus":{"background-color":"#a150e0"},"border-radius":"10px","padding-left":"90px","padding-right":"90px"},quantityInput:{"font-size":"16px","padding-top":"16px","padding-bottom":"16px"}},text:{button:"Dodaj do koszyka"}},option:{},cart:{styles:{button:{"font-weight":"bold","font-size":"16px","padding-top":"16px","padding-bottom":"16px",":hover":{"background-color":"#a150e0"},"background-color":"#b359f9",":focus":{"background-color":"#a150e0"},"border-radius":"10px"}},text:{total:"Suma częściowa",button:"Checkout"}},toggle:{styles:{toggle:{"font-weight":"bold","background-color":"#b359f9",":hover":{"background-color":"#a150e0"},":focus":{"background-color":"#a150e0"}},count:{"font-size":"16px"}}}}})}),o.current=!0}window.ShopifyBuy&&window.ShopifyBuy.UI?ShopifyBuyInit():function(){let e=document.createElement("script");e.async=!0,e.src="https://sdks.shopifycdn.com/buy-button/latest/buy-button-storefront.min.js";let o=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0];o.appendChild(e),e.onload=ShopifyBuyInit}()})()},[]),(0,n.jsx)("div",{id:"product-component-publish-promo-2",ref:e,style:{textAlign:"center"}})}function PublishWithPromo3(){let e=(0,a.useRef)(null),o=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{o.current||(()=>{function ShopifyBuyInit(){let e=window.ShopifyBuy.buildClient({domain:"3cusn0-tb.myshopify.com",storefrontAccessToken:"1c310fecfc50cafd83aa554bc311b949"});window.ShopifyBuy.UI.onReady(e).then(e=>{e.createComponent("product",{id:"9714016223574",node:document.getElementById("product-component-publish-promo-3"),moneyFormat:"%7B%7Bamount_with_comma_separator%7D%7D%20z%C5%82",options:{product:{styles:{product:{"@media (min-width: 601px)":{"max-width":"calc(25% - 20px)","margin-left":"20px","margin-bottom":"50px"}},button:{"font-weight":"bold","font-size":"16px","padding-top":"16px","padding-bottom":"16px",color:"#ffffff !important",":hover":{"background-color":"#a150e0",color:"#ffffff !important"},"background-color":"#b359f9",":focus":{"background-color":"#a150e0",color:"#ffffff !important"},"border-radius":"10px","padding-left":"90px","padding-right":"90px"},quantityInput:{"font-size":"16px","padding-top":"16px","padding-bottom":"16px"}},buttonDestination:"checkout",contents:{img:!1,title:!1,price:!1},text:{button:"Publikuj + Promuj za 21zł"}},productSet:{styles:{products:{"@media (min-width: 601px)":{"margin-left":"-20px"}}}},modalProduct:{contents:{img:!1,imgWithCarousel:!0,button:!1,buttonWithQuantity:!0},styles:{product:{"@media (min-width: 601px)":{"max-width":"100%","margin-left":"0px","margin-bottom":"0px"}},button:{"font-weight":"bold","font-size":"16px","padding-top":"16px","padding-bottom":"16px",":hover":{"background-color":"#a150e0"},"background-color":"#b359f9",":focus":{"background-color":"#a150e0"},"border-radius":"10px","padding-left":"90px","padding-right":"90px"},quantityInput:{"font-size":"16px","padding-top":"16px","padding-bottom":"16px"}},text:{button:"Dodaj do koszyka"}},option:{},cart:{styles:{button:{"font-weight":"bold","font-size":"16px","padding-top":"16px","padding-bottom":"16px",":hover":{"background-color":"#a150e0"},"background-color":"#b359f9",":focus":{"background-color":"#a150e0"},"border-radius":"10px"}},text:{total:"Suma częściowa",button:"Checkout"}},toggle:{styles:{toggle:{"font-weight":"bold","background-color":"#b359f9",":hover":{"background-color":"#a150e0"},":focus":{"background-color":"#a150e0"}},count:{"font-size":"16px"}}}}})}),o.current=!0}window.ShopifyBuy&&window.ShopifyBuy.UI?ShopifyBuyInit():function(){let e=document.createElement("script");e.async=!0,e.src="https://sdks.shopifycdn.com/buy-button/latest/buy-button-storefront.min.js";let o=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0];o.appendChild(e),e.onload=ShopifyBuyInit}()})()},[]),(0,n.jsx)("div",{id:"product-component-publish-promo-3",ref:e,style:{textAlign:"center"}})}var u=t(1910),p=t.n(u);function AddOfferForm(e){let{onSubmit:o,isFirstOffer:t=!1,userHasPro:i=!1,userProType:r=null}=e;console.log("\uD83D\uDD0D AddOfferForm props:",{isFirstOffer:t,userHasPro:i,userProType:r});let s=t||i;console.log("\uD83D\uDD0D qualifiesForFreePublication:",s);let[l,u]=(0,a.useState)(1),[m,f]=(0,a.useState)("szukam_pracownika"),[h,b]=(0,a.useState)(""),[g,x]=(0,a.useState)(""),[y,j]=(0,a.useState)(""),[k,w]=(0,a.useState)(""),[z,v]=(0,a.useState)([]),[P,D]=(0,a.useState)(""),[_,S]=(0,a.useState)(""),[B,N]=(0,a.useState)(""),[C,A]=(0,a.useState)(""),[I,O]=(0,a.useState)(""),[R,T]=(0,a.useState)(""),[F,W]=(0,a.useState)(""),[E,U]=(0,a.useState)([]),[q,G]=(0,a.useState)(!1),[M,L]=(0,a.useState)(!1),[Q,Z]=(0,a.useState)({addPrice:0,promoPrice:0,total:0}),[K,X]=(0,a.useState)(null),handlePublishSuccess=()=>{u(1),f("szukam_pracownika"),b(""),x(""),j(""),w(""),v([]),D(""),S(""),N(""),A(""),O(""),T(""),W(""),U([]),G(!1),L(!1),X(null),o({success:!0,action:"published"}),setTimeout(()=>{window.location.reload()},2e3)},getFormData=()=>({offerType:m,title:h,description:g,price:parseFloat(y)||0,category:k,subcategories:z,location:P,contactName:I,contactEmail:R,contactPhone:F,wantPromo:q}),getPromoWithPublishButton=e=>{let o=getFormData();return e>=0&&e<=100?(0,n.jsx)(PublishWithPromo1Direct,{offerData:o,onSuccess:handlePublishSuccess}):e>=101&&e<=300?(0,n.jsx)(PublishWithPromo2,{}):e>=301&&e<=1e3?(0,n.jsx)(PublishWithPromo3,{}):null},getPromoWithPublishPrice=e=>e>=0&&e<=100?10:e>=101&&e<=300?16.99:e>=301&&e<=1e3?21:0;(0,a.useEffect)(()=>{if(y){let e=parseFloat(y)||0;s?Z({addPrice:0,promoPrice:"PRO_PLUS"!==r&&("PRO"!==r||M)&&q?(0,c.XM)(e,!0).promoPrice:0,total:"PRO_PLUS"!==r&&("PRO"!==r||M)&&q?(0,c.XM)(e,!0).promoPrice:0}):Z((0,c.XM)(e,q))}else Z({addPrice:0,promoPrice:0,total:0})},[y,q,t,i,r,M]),(0,a.useEffect)(()=>{let e=[];B&&e.push(B),_&&e.push(_),C&&e.push(C),D(e.join(", "))},[_,B,C]);let handleSubcategoryToggle=e=>{v(o=>o.includes(e)?o.filter(o=>o!==e):[...o,e])},removeImage=e=>{U(o=>o.filter((o,t)=>t!==e))};return(0,n.jsxs)("form",{className:p().addOfferForm,children:[(0,n.jsxs)("div",{className:p().progress,children:[(0,n.jsx)("div",{className:p().progressBar,children:(0,n.jsx)("div",{className:p().progressFill,style:{width:"".concat(l/6*100,"%")}})}),(0,n.jsxs)("span",{className:p().progressText,children:["Krok ",l," z 6"]})]}),1===l&&(0,n.jsxs)("div",{className:p().step,children:[(0,n.jsx)("h2",{children:"Wybierz rodzaj ogłoszenia"}),t&&(0,n.jsxs)("div",{className:p().freeOfferBanner,children:[(0,n.jsx)("div",{className:p().freeOfferBannerIcon,children:"\uD83C\uDF89"}),(0,n.jsxs)("div",{className:p().freeOfferBannerText,children:[(0,n.jsx)("strong",{children:"Twoje pierwsze ogłoszenie jest DARMOWE!"}),(0,n.jsx)("p",{children:"Publikuj bez żadnych opłat - to nasza forma powitania"})]})]}),(0,n.jsxs)("div",{className:p().offerTypeGrid,children:[(0,n.jsxs)("button",{type:"button",className:"".concat(p().offerTypeCard," ").concat("szukam_pracownika"===m?p().active:""),onClick:()=>f("szukam_pracownika"),children:[(0,n.jsx)("div",{className:p().offerTypeIcon,children:"\uD83D\uDCBC"}),(0,n.jsx)("h3",{children:"Oferuję pracę"}),(0,n.jsx)("p",{children:"Szukam kogoś do wykonania zadania"})]}),(0,n.jsxs)("button",{type:"button",className:"".concat(p().offerTypeCard," ").concat("szukam_pracy"===m?p().active:""),onClick:()=>f("szukam_pracy"),children:[(0,n.jsx)("div",{className:p().offerTypeIcon,children:"\uD83D\uDD0D"}),(0,n.jsx)("h3",{children:"Szukam pracy"}),(0,n.jsx)("p",{children:"Chcę świadczyć usługi"})]})]}),(0,n.jsx)("button",{type:"button",className:p().nextBtn,onClick:()=>u(2),children:"Dalej"})]}),2===l&&(0,n.jsxs)("div",{className:p().step,children:[(0,n.jsx)("h2",{children:"Wybierz kategorię"}),(0,n.jsx)("div",{className:p().categoryGrid,children:Object.entries(c.aA).map(e=>{let[o,t]=e;return(0,n.jsxs)("button",{type:"button",className:"".concat(p().categoryCard," ").concat(k===o?p().active:""),onClick:()=>{w(o),v([])},children:[(0,n.jsx)("h3",{children:t.name}),(0,n.jsxs)("p",{children:[t.subcategories.length," podkategorii"]})]},o)})}),(0,n.jsxs)("div",{className:p().stepButtons,children:[(0,n.jsx)("button",{type:"button",className:p().backBtn,onClick:()=>u(1),children:"Wstecz"}),(0,n.jsx)("button",{type:"button",className:p().nextBtn,onClick:()=>u(3),disabled:!k,children:"Dalej"})]})]}),3===l&&(0,n.jsxs)("div",{className:p().step,children:[(0,n.jsx)("h2",{children:"Wybierz podkategorie"}),(0,n.jsx)("p",{className:p().subtitle,children:"Możesz wybrać kilka opcji"}),(0,n.jsx)("div",{className:p().subcategoryGrid,children:k&&c.aA[k].subcategories.map(e=>(0,n.jsx)("button",{type:"button",className:"".concat(p().subcategoryTag," ").concat(z.includes(e)?p().active:""),onClick:()=>handleSubcategoryToggle(e),children:e},e))}),(0,n.jsxs)("div",{className:p().stepButtons,children:[(0,n.jsx)("button",{type:"button",className:p().backBtn,onClick:()=>u(2),children:"Wstecz"}),(0,n.jsx)("button",{type:"button",className:p().nextBtn,onClick:()=>u(4),disabled:0===z.length,children:"Dalej"})]})]}),4===l&&(0,n.jsxs)("div",{className:p().step,children:[(0,n.jsx)("h2",{children:"Szczeg\xf3ły ogłoszenia"}),(0,n.jsxs)("div",{className:p().formGrid,children:[(0,n.jsxs)("div",{className:p().formGroup,children:[(0,n.jsx)("label",{children:"Tytuł ogłoszenia *"}),(0,n.jsx)("input",{type:"text",value:h,onChange:e=>b(e.target.value),placeholder:"Np. Koszenie trawy w ogrodzie",required:!0,style:{color:"white"}})]}),(0,n.jsxs)("div",{className:p().formGroup,children:[(0,n.jsx)("label",{children:"Opis *"}),(0,n.jsx)("textarea",{value:g,onChange:e=>x(e.target.value),placeholder:"Opisz szczeg\xf3łowo czego potrzebujesz lub co oferujesz...",rows:4,required:!0,style:{color:"white"}})]}),(0,n.jsxs)("div",{className:p().formGroup,children:[(0,n.jsx)("label",{children:"Cena (zł) *"}),(0,n.jsx)("input",{type:"number",value:y,onChange:e=>j(e.target.value),placeholder:"0",min:"0",step:"0.01",required:!0})]}),(0,n.jsxs)("div",{className:p().formGroup,children:[(0,n.jsx)("label",{children:"Lokalizacja *"}),(0,n.jsxs)("div",{className:p().locationSection,children:[(0,n.jsxs)("div",{className:p().locationRow,children:[(0,n.jsxs)("div",{className:p().locationField,children:[(0,n.jsx)("label",{children:"Wojew\xf3dztwo"}),(0,n.jsxs)("select",{value:_,onChange:e=>{S(e.target.value),N("")},required:!0,children:[(0,n.jsx)("option",{value:"",children:"Wybierz wojew\xf3dztwo"}),d.LE.map(e=>(0,n.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})]}),(0,n.jsxs)("div",{className:p().locationField,children:[(0,n.jsx)("label",{children:"Miasto"}),(0,n.jsxs)("select",{value:B,onChange:e=>N(e.target.value),disabled:!_,required:!0,children:[(0,n.jsx)("option",{value:"",children:"Wybierz miasto"}),_&&(0,d._u)(_).map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]})]}),(0,n.jsx)("div",{className:p().locationRow,children:(0,n.jsxs)("div",{className:p().locationField,children:[(0,n.jsx)("label",{children:"Szczeg\xf3ły (opcjonalne)"}),(0,n.jsx)("input",{type:"text",value:C,onChange:e=>A(e.target.value),placeholder:"Dzielnica, ulica..."})]})}),P&&(0,n.jsxs)("div",{className:p().locationPreview,children:[(0,n.jsx)("strong",{children:"Pełna lokalizacja:"})," ",P]})]})]}),(0,n.jsxs)("div",{className:p().formGroup,children:[(0,n.jsx)("label",{children:"Zdjęcia (1-3 zdjęcia)"}),(0,n.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{if(e.target.files){let o=Array.from(e.target.files);U(e=>{let t=[...e,...o];return t.slice(0,3)})}e.target.value=""},className:p().fileInput,disabled:E.length>=3}),E.length>=3&&(0,n.jsx)("small",{style:{color:"#ffa500",marginTop:"5px",display:"block"},children:"Maksymalnie 3 zdjęcia. Usuń jedno, żeby dodać nowe."}),E.length>0&&(0,n.jsxs)("div",{className:p().imagePreviewGrid,children:[(0,n.jsxs)("small",{style:{marginBottom:"10px",display:"block"},children:[E.length," z 3 zdjęć wybranych"]}),(0,n.jsx)("div",{className:p().imagesList,children:E.map((e,o)=>(0,n.jsxs)("div",{className:p().imagePreviewItem,children:[(0,n.jsx)("img",{src:URL.createObjectURL(e),alt:"Podgląd ".concat(o+1),className:p().imagePreview}),(0,n.jsx)("button",{type:"button",onClick:()=>removeImage(o),className:p().removeImageBtn,title:"Usuń zdjęcie",children:"\xd7"}),(0,n.jsx)("span",{className:p().imageName,children:e.name.length>20?e.name.substring(0,17)+"...":e.name})]},o))})]})]})]}),(0,n.jsxs)("div",{className:p().stepButtons,children:[(0,n.jsx)("button",{type:"button",className:p().backBtn,onClick:()=>u(3),children:"Wstecz"}),(0,n.jsx)("button",{type:"button",className:p().nextBtn,onClick:()=>u(5),disabled:!h||!g||!y||!_||!B,children:"Dalej"})]})]}),5===l&&(0,n.jsxs)("div",{className:p().step,children:[(0,n.jsx)("h2",{children:"Dane kontaktowe"}),(0,n.jsxs)("div",{className:p().formGrid,children:[(0,n.jsxs)("div",{className:p().formGroup,children:[(0,n.jsx)("label",{children:"Imię i nazwisko *"}),(0,n.jsx)("input",{type:"text",value:I,onChange:e=>O(e.target.value),placeholder:"Jan Kowalski",required:!0})]}),(0,n.jsxs)("div",{className:p().formGroup,children:[(0,n.jsx)("label",{children:"Email * - wpisz email zgodny z emailem z używanego konta"}),(0,n.jsx)("input",{type:"email",value:R,onChange:e=>T(e.target.value),placeholder:"jan@example.com",required:!0})]}),(0,n.jsxs)("div",{className:p().formGroup,children:[(0,n.jsx)("label",{children:"Telefon"}),(0,n.jsx)("input",{type:"tel",value:F,onChange:e=>W(e.target.value),placeholder:"+48 123 456 789"})]})]}),(0,n.jsxs)("div",{className:p().stepButtons,children:[(0,n.jsx)("button",{type:"button",className:p().backBtn,onClick:()=>u(4),children:"Wstecz"}),(0,n.jsx)("button",{type:"button",className:p().nextBtn,onClick:()=>u(6),disabled:!I||!R,children:"Dalej"})]})]}),6===l&&(()=>{let e=parseFloat(y||"0"),o=getPromoWithPublishPrice(e),a=e<=1e3;return(0,n.jsxs)("div",{className:"".concat(p().step," ").concat(p().step6),children:[(0,n.jsx)("h2",{children:"Publikacja ogłoszenia"}),K&&(0,n.jsxs)("div",{style:{backgroundColor:"#e7f5e7",border:"2px solid #4caf50",borderRadius:"8px",padding:"15px",marginBottom:"20px"},children:[(0,n.jsx)("h4",{style:{color:"#2e7d2e",margin:"0 0 10px 0"},children:"✅ Ogłoszenie zapisane!"}),(0,n.jsxs)("p",{style:{margin:"0",color:"#2e7d2e"},children:["Twoje ogłoszenie (ID: ",K,") zostało zapisane i będzie opublikowane automatycznie po opłaceniu."]})]}),i&&(0,n.jsxs)("div",{style:{backgroundColor:"#fff3cd",border:"2px solid #ffc107",borderRadius:"8px",padding:"15px",marginBottom:"20px"},children:[(0,n.jsxs)("h4",{style:{color:"#856404",margin:"0 0 10px 0"},children:["\uD83C\uDF1F Konto ",r," - Korzyści Premium!"]}),(0,n.jsx)("p",{style:{margin:"0",color:"#856404"},children:"PRO_PLUS"===r?"Masz darmowe publikacje i nielimitowane darmowe promocje! Możesz też wybrać płatną promocję jeśli nie chcesz wykorzystywać limitu.":"Masz darmowe publikacje i 1 darmową promocję miesięcznie! Możesz też wybrać płatną promocję."})]}),(0,n.jsxs)("div",{className:p().publishOptions,children:[(0,n.jsxs)("div",{className:p().optionSection,children:[(0,n.jsx)("h4",{className:p().optionTitle,children:s?t?"Darmowa publikacja (pierwsza oferta!)":"Darmowa publikacja (PRO)":"Zwykła publikacja"}),(0,n.jsxs)("div",{className:p().priceInfo,children:[(0,n.jsx)("span",{className:p().priceAmount,children:s?"DARMOWE":"6 zł"}),(0,n.jsx)("span",{className:p().priceDescription,children:"Publikacja na 30 dni"})]}),s?(0,n.jsx)(PublishButtonFree,{offerData:getFormData(),onPublishSuccess:handlePublishSuccess}):(0,n.jsx)(PublishButtonDirect,{offerData:getFormData(),onSuccess:handlePublishSuccess})]}),a&&(0,n.jsxs)("div",{className:p().optionSection,children:[(0,n.jsx)("div",{className:p().promoCheckbox,children:(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"checkbox",checked:q,onChange:e=>G(e.target.checked)}),(0,n.jsx)("span",{children:"Chcę promować to ogłoszenie"})]})}),q&&(0,n.jsxs)("div",{className:p().promoOption,children:[("PRO_PLUS"===r||"PRO"===r)&&(0,n.jsx)("div",{style:{marginBottom:"15px"},children:(0,n.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,n.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"8px"},children:[(0,n.jsx)("input",{type:"radio",name:"promoType",checked:!M,onChange:()=>L(!1)}),(0,n.jsxs)("span",{style:{color:"#333",fontSize:"16px"},children:["Użyj darmowej promocji (",r,")"]})]}),(0,n.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,n.jsx)("input",{type:"radio",name:"promoType",checked:M,onChange:()=>L(!0)}),(0,n.jsx)("span",{style:{color:"#333",fontSize:"16px"},children:"Płatna promocja (bez wykorzystywania limitu)"})]})]})}),(0,n.jsx)("h4",{className:p().optionTitle,children:"Publikacja + Promocja"}),(0,n.jsxs)("div",{className:p().priceInfo,children:[(0,n.jsx)("span",{className:p().priceAmount,children:"PRO_PLUS"!==r&&"PRO"!==r||M?"".concat(o," zł"):"DARMOWE"}),(0,n.jsx)("span",{className:p().priceDescription,children:"Publikacja + promocja (wyświetlane wyżej w wynikach)"})]}),"PRO_PLUS"!==r&&"PRO"!==r||M?i&&!M?(0,n.jsx)(PublishButtonDirect,{offerData:getFormData(),onSuccess:handlePublishSuccess}):getPromoWithPublishButton(e):(0,n.jsx)(PublishWithPromoFree,{offerData:getFormData(),onPublishSuccess:handlePublishSuccess})]})]}),!a&&(0,n.jsx)("div",{className:p().noPromoInfo,children:(0,n.jsx)("p",{children:"Promocja dostępna tylko dla ofert do 1000 zł"})})]}),(0,n.jsx)("div",{className:p().stepButtons,children:(0,n.jsx)("button",{type:"button",className:p().backBtn,onClick:()=>u(5),children:"Wstecz"})})]})})()]})}var m=t(743),f=t.n(m);function AddAdvertisementPage(){(0,i.useRouter)();let[e,o]=(0,a.useState)("natura"),[t,r]=(0,a.useState)(null),[c,d]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=new MutationObserver(()=>{let e=document.documentElement.getAttribute("data-theme")||"natura";o(e)});e.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]});let t=document.documentElement.getAttribute("data-theme")||"natura";return o(t),()=>e.disconnect()},[]),(0,a.useEffect)(()=>{console.log("\uD83D\uDD0D add-new useEffect triggered");let fetchUserData=async()=>{try{console.log("\uD83D\uDD0D Fetching user data...");let e=await fetch("/api/auth/me"),o=await e.json();if(console.log("\uD83D\uDD0D Response data:",o),o.user){r(o.user),console.log("\uD83D\uDD0D User data:",o.user);let e=await fetch("/api/auth/my-offers"),t=await e.json();console.log("\uD83D\uDD0D User offers:",t.offers);let n=0===(t.offers||[]).length;console.log("\uD83D\uDD0D Is first offer:",n),d(n)}}catch(e){console.error("Błąd pobierania danych użytkownika:",e)}};fetchUserData()},[]);let handleSubmit=async e=>{console.log("\uD83D\uDD0D handleSubmit called with:",e),console.log("\uD83D\uDD0D Current user:",t),console.log("\uD83D\uDD0D isFirstOffer:",c);try{if(e.success&&"published"===e.action){console.log("✅ Ogłoszenie PRO/PRO+ zostało opublikowane");return}let o=(null==t?void 0:t.proType)==="PRO"||(null==t?void 0:t.proType)==="PRO_PLUS";if(console.log("\uD83D\uDD0D Sprawdzanie PRO status:",{proType:null==t?void 0:t.proType,userHasPro:o,isFirstOffer:c,userId:null==t?void 0:t.id}),!o&&!c){console.log("❌ Pokazuję alert o płatności - brak PRO i nie pierwsze ogłoszenie"),alert('⚠️ Wszystkie ogłoszenia wymagają opłacenia przez przyciski płatności w ostatnim kroku. Użyj przycisk\xf3w "Publikuj za 6 zł" lub "Publikuj + Promuj" aby kontynuować.');return}console.log("✅ Użytkownik PRO/PRO+ lub pierwsze ogłoszenie - bez alertu płatności");return}catch(e){console.error("Błąd podczas dodawania ogłoszenia:",e),alert("Wystąpił błąd podczas dodawania ogłoszenia")}};return(0,n.jsxs)("div",{className:f().pageWrapper,children:[(0,n.jsx)(l.Z,{}),(0,n.jsxs)("div",{className:f().bgContainer,children:[(()=>{switch(e){case"light":return(0,n.jsx)("video",{className:f().bgVideo,src:"/chmury.mp4",autoPlay:!0,loop:!0,muted:!0,playsInline:!0});case"dark":default:return(0,n.jsx)("video",{className:f().bgVideo,src:"/smoke.mp4",autoPlay:!0,loop:!0,muted:!0,playsInline:!0});case"night":return(0,n.jsx)("div",{className:f().nightBackground});case"natura":return(0,n.jsx)("div",{className:f().naturaBackground})}})(),(0,n.jsx)("div",{className:f().bgTint})]}),(0,n.jsxs)("div",{className:f().content,children:[(0,n.jsx)("div",{className:f().backWrapper,children:(0,n.jsx)(s(),{href:"/",className:f().backButton,children:"← Powr\xf3t do strony gł\xf3wnej"})}),(0,n.jsx)(AddOfferForm,{onSubmit:handleSubmit,isFirstOffer:c,userHasPro:(null==t?void 0:t.hasPro)||!1,userProType:(null==t?void 0:t.proType)||null})]})]})}},743:function(e){e.exports={pageWrapper:"AddAdvertisement_pageWrapper__I_G9e",bgContainer:"AddAdvertisement_bgContainer__eMEkf",bgTint:"AddAdvertisement_bgTint__jAv0F",bgVideo:"AddAdvertisement_bgVideo__nQ4hu",nightBackground:"AddAdvertisement_nightBackground__FfbyB",nightGradient:"AddAdvertisement_nightGradient__oKD7_",naturaBackground:"AddAdvertisement_naturaBackground__Dt_wb",naturaZoom:"AddAdvertisement_naturaZoom__Qq3Uj",lightBackground:"AddAdvertisement_lightBackground__Q12z_",backWrapper:"AddAdvertisement_backWrapper__YvosS",backButton:"AddAdvertisement_backButton__7yCQ8",formContainer:"AddAdvertisement_formContainer__zMpT_",field:"AddAdvertisement_field__ApdlT",counter:"AddAdvertisement_counter__8QnaD",uploadArea:"AddAdvertisement_uploadArea__IOCbo",previews:"AddAdvertisement_previews__h4SQu",dragging:"AddAdvertisement_dragging__AQWW6",inline:"AddAdvertisement_inline__4sumR",actions:"AddAdvertisement_actions__s2Lsz",btn:"AddAdvertisement_btn__Jf07G",ReactModal__Overlay:"AddAdvertisement_ReactModal__Overlay__N9F_q",modalContent:"AddAdvertisement_modalContent__cte0i"}}},function(e){e.O(0,[424,68,372,379,774,888,179],function(){return e(e.s=6190)}),_N_E=e.O()}]);