exports.id=3130,exports.ids=[3130],exports.modules={8378:e=>{e.exports={overlay:"AdminSubscriptionPanel_overlay__C8IB_",panel:"AdminSubscriptionPanel_panel__rKnSY",header:"AdminSubscriptionPanel_header__BGC9a",closeButton:"AdminSubscriptionPanel_closeButton__tQpDH",content:"AdminSubscriptionPanel_content__zAgX8",grantSection:"AdminSubscriptionPanel_grantSection__6N4zf",formGroup:"AdminSubscriptionPanel_formGroup__Cq0ee",select:"AdminSubscriptionPanel_select__N9pv4",input:"AdminSubscriptionPanel_input__wMapi",grantButton:"AdminSubscriptionPanel_grantButton__hIu_9",message:"AdminSubscriptionPanel_message__5_tku",usersSection:"AdminSubscriptionPanel_usersSection__WtdSK",usersList:"AdminSubscriptionPanel_usersList__zMvKy",userCard:"AdminSubscriptionPanel_userCard__b1Gje",userInfo:"AdminSubscriptionPanel_userInfo__cSik_",userEmail:"AdminSubscriptionPanel_userEmail__3uJDN",userName:"AdminSubscriptionPanel_userName__uz70B",subscriptionInfo:"AdminSubscriptionPanel_subscriptionInfo__FSu7B",subscriptionType:"AdminSubscriptionPanel_subscriptionType__vf8Ge",status:"AdminSubscriptionPanel_status__MQ_Ac",daysRemaining:"AdminSubscriptionPanel_daysRemaining__mA6gz",usageInfo:"AdminSubscriptionPanel_usageInfo__wBNi9"}},3130:(e,s,n)=>{"use strict";n.d(s,{Z:()=>AdminSubscriptionPanel});var i=n(997),a=n(6689),t=n(8378),r=n.n(t);function AdminSubscriptionPanel({isVisible:e,onClose:s}){let[n,t]=(0,a.useState)([]),[l,c]=(0,a.useState)(!1),[o,u]=(0,a.useState)(""),[d,m]=(0,a.useState)("PRO"),[p,_]=(0,a.useState)(30),[h,b]=(0,a.useState)("");(0,a.useEffect)(()=>{e&&fetchUsers()},[e]);let fetchUsers=async()=>{c(!0);try{let e=await fetch("/api/admin/users");if(e.ok){let s=await e.json();t(s.users)}}catch(e){console.error("Error fetching users:",e)}c(!1)},handleGrantSubscription=async()=>{if(!o){b("Wybierz użytkownika");return}c(!0);try{let e=await fetch("/api/admin/manage-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:o,subscriptionType:d,duration:p})}),s=await e.json();e.ok?(b(`✅ Pomyślnie nadano ${d} dla ${o}`),fetchUsers(),u("")):b(`❌ Błąd: ${s.error}`)}catch(e){b("❌ Błąd podczas nadawania subskrypcji")}c(!1)},getSubscriptionColor=e=>{switch(e){case"PRO":return"#4CAF50";case"PRO_PLUS":return"#FF9800";default:return"#9E9E9E"}},getStatusColor=e=>e?"#4CAF50":"#F44336";return e?i.jsx("div",{className:r().overlay,children:(0,i.jsxs)("div",{className:r().panel,children:[(0,i.jsxs)("div",{className:r().header,children:[i.jsx("h2",{children:"\uD83D\uDC51 Panel Administracyjny - Zarządzanie Subskrypcjami"}),i.jsx("button",{className:r().closeButton,onClick:s,children:"✕"})]}),(0,i.jsxs)("div",{className:r().content,children:[(0,i.jsxs)("div",{className:r().grantSection,children:[i.jsx("h3",{children:"Nadaj Subskrypcję"}),(0,i.jsxs)("div",{className:r().formGroup,children:[i.jsx("label",{children:"Wybierz użytkownika:"}),(0,i.jsxs)("select",{value:o,onChange:e=>u(e.target.value),className:r().select,children:[i.jsx("option",{value:"",children:"-- Wybierz użytkownika --"}),n.map(e=>(0,i.jsxs)("option",{value:e.email,children:[e.email," (",e.name||"Bez nazwy",") - ",e.subscriptionType]},e.id))]})]}),(0,i.jsxs)("div",{className:r().formGroup,children:[i.jsx("label",{children:"Typ subskrypcji:"}),(0,i.jsxs)("select",{value:d,onChange:e=>m(e.target.value),className:r().select,children:[i.jsx("option",{value:"FREE",children:"FREE"}),i.jsx("option",{value:"PRO",children:"PRO"}),i.jsx("option",{value:"PRO_PLUS",children:"PRO+"})]})]}),(0,i.jsxs)("div",{className:r().formGroup,children:[i.jsx("label",{children:"Czas trwania (dni):"}),i.jsx("input",{type:"number",value:p,onChange:e=>_(parseInt(e.target.value)),min:"1",max:"365",className:r().input})]}),i.jsx("button",{onClick:handleGrantSubscription,disabled:l,className:r().grantButton,children:l?"Przetwarzanie...":"Nadaj Subskrypcję"}),h&&i.jsx("div",{className:r().message,children:h})]}),(0,i.jsxs)("div",{className:r().usersSection,children:[(0,i.jsxs)("h3",{children:["Lista Użytkownik\xf3w (",n.length,")"]}),i.jsx("div",{className:r().usersList,children:n.map(e=>(0,i.jsxs)("div",{className:r().userCard,children:[(0,i.jsxs)("div",{className:r().userInfo,children:[(0,i.jsxs)("div",{className:r().userEmail,children:[e.email," ",e.isAdmin&&"\uD83D\uDC51"]}),i.jsx("div",{className:r().userName,children:e.name||"Bez nazwy"})]}),(0,i.jsxs)("div",{className:r().subscriptionInfo,children:[i.jsx("span",{className:r().subscriptionType,style:{backgroundColor:getSubscriptionColor(e.subscriptionType)},children:e.subscriptionType}),i.jsx("span",{className:r().status,style:{color:getStatusColor(e.isSubscriptionActive)},children:e.isSubscriptionActive?"Aktywna":"Nieaktywna"}),null!==e.daysRemaining&&(0,i.jsxs)("span",{className:r().daysRemaining,children:[e.daysRemaining," dni"]})]}),(0,i.jsxs)("div",{className:r().usageInfo,children:[(0,i.jsxs)("small",{children:["Promocje użyte: ",e.promotionsUsed]}),(0,i.jsxs)("small",{children:["Dołączył: ",new Date(e.createdAt).toLocaleDateString("pl-PL")]})]})]},e.id))})]})]})]})}):null}}};